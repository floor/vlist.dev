var At=(e,r)=>{let t=r;return{getOffset:(a)=>a*e,getHeight:(a)=>e,indexAtOffset:(a)=>{if(t===0||e===0)return 0;return Math.max(0,Math.min(Math.floor(a/e),t-1))},getTotalHeight:()=>t*e,getTotal:()=>t,rebuild:(a)=>{t=a},isVariable:()=>!1}},zt=(e,r)=>{let t=r,a=new Float64Array(0),n=(l)=>{t=l,a=new Float64Array(l+1),a[0]=0;for(let o=0;o<l;o++)a[o+1]=a[o]+e(o)};n(r);let i=(l)=>{if(t===0)return 0;if(l<=0)return 0;if(l>=a[t])return t-1;let o=0,u=t-1;while(o<u){let f=o+u+1>>>1;if(a[f]<=l)o=f;else u=f-1}return o};return{getOffset:(l)=>{if(l<=0)return 0;if(l>=t)return a[t];return a[l]},getHeight:(l)=>e(l),indexAtOffset:(l)=>i(l),getTotalHeight:()=>a[t]??0,getTotal:()=>t,rebuild:(l)=>n(l),isVariable:()=>!0}},kt=(e,r)=>{if(typeof e==="number")return At(e,r);return zt(e,r)},Dt=(e,r,t,a)=>{if(a===0)return 0;if(!e.isVariable())return Math.ceil(t/e.getHeight(0));let n=0,i=0,l=r;while(l<a&&i<t)i+=e.getHeight(l),n++,l++;return Math.max(1,n)},gt=(e,r,t)=>{if(t===0)return 0;if(!e.isVariable())return Math.floor(r/e.getHeight(0));let a=0,n=0;for(let i=t-1;i>=0;i--){let l=e.getHeight(i);if(n+l>r)break;n+=l,a++}return Math.max(a,1)},tt=(e,r,t)=>{if(t===0)return 0;let a=Math.floor(r),n=r-a,i=Math.max(0,Math.min(a,t-1));return e.getOffset(i)+n*e.getHeight(i)},Pt=(e="div",r=100)=>{let t=[],a=0,n=0;return{acquire:()=>{let i=t.pop();if(i)return n++,i;a++;let l=document.createElement(e);return l.setAttribute("role","option"),l},release:(i)=>{if(t.length<r)i.className="",i.textContent="",i.removeAttribute("style"),i.removeAttribute("data-index"),i.removeAttribute("data-id"),t.push(i)},clear:()=>{t.length=0},stats:()=>({poolSize:t.length,created:a,reused:n})}},Ft=(e,r,t,a,n,i,l,o,u)=>{let f=Pt("div"),d=new Map,c=null,I=0,h="",S=(s)=>{if(c&&I===s)return c;if(u)c=u.getState(s,t);else{let g=t.getTotalHeight();c={isCompressed:!1,actualHeight:g,virtualHeight:g,ratio:1}}return I=s,c},v={selected:!1,focused:!1},p=(s,g)=>{return v.selected=s,v.focused=g,v},b=(s,g)=>{if(typeof g==="string")s.innerHTML=g;else s.replaceChildren(g)},E=(s,g)=>{if(l){if(s.style.width=`${t.getHeight(g)}px`,o!=null)s.style.height=`${o}px`}else s.style.height=`${t.getHeight(g)}px`},W=(s,g)=>{if(g){let C=S(g.totalItems);if(C.isCompressed&&u)return u.getPosition(s,g.scrollTop,t,g.totalItems,g.containerHeight,C,g.rangeStart)}return t.getOffset(s)},F=(s,g,C)=>{let z=W(g,C);s.style.transform=l?`translateX(${Math.round(z)}px)`:`translateY(${Math.round(z)}px)`},G=`${a}-item`,V=`${a}-item--selected`,j=`${a}-item--focused`,_=(s)=>{s.className=G},le=(s,g,C)=>{s.classList.toggle(V,g),s.classList.toggle(j,C)},ae=(s,g,C,z,k)=>{let M=f.acquire(),K=p(C,z);if(E(M,s),_(M),M.dataset.index=String(s),M.dataset.id=String(g.id),M.ariaSelected=String(C),i)M.id=`${i}-item-${s}`;if(n)h=String(n()),M.setAttribute("aria-setsize",h),M.setAttribute("aria-posinset",String(s+1));let U=r(g,s,K);return b(M,U),le(M,C,z),F(M,s,k),M},te=(s,g,C,z,k)=>{for(let[m,D]of d)if(m<g.start||m>g.end)D.element.remove(),f.release(D.element),d.delete(m);let M=!1;if(n){let m=String(n());M=m!==h,h=m}let K=document.createDocumentFragment(),U=[];for(let m=g.start;m<=g.end;m++){let D=m-g.start,A=s[D];if(!A)continue;let $=C.has(A.id),Q=m===z,q=d.get(m);if(q){let Z=q.element.dataset.id,P=String(A.id);if(Z!==P){let w=p($,Q),L=r(A,m,w);b(q.element,L),q.element.dataset.id=P,E(q.element,m)}if(le(q.element,$,Q),q.element.ariaSelected=String($),F(q.element,m,k),M)q.element.setAttribute("aria-setsize",h)}else{let Z=ae(m,A,$,Q,k);K.appendChild(Z),U.push({index:m,element:Z})}}if(U.length>0){e.appendChild(K);for(let{index:m,element:D}of U)d.set(m,{index:m,element:D})}},O=(s)=>{for(let[g,C]of d)F(C.element,g,s)},re=(s,g,C,z)=>{let k=d.get(s);if(k){let M=p(C,z),K=r(g,s,M);b(k.element,K),le(k.element,C,z),k.element.dataset.id=String(g.id),k.element.ariaSelected=String(C)}},x=(s,g,C)=>{let z=d.get(s);if(z)le(z.element,g,C)},H=(s)=>{return d.get(s)?.element},T=()=>{for(let[,s]of d)s.element.remove(),f.release(s.element);d.clear()};return{render:te,updatePositions:O,updateItem:re,updateItemClasses:x,getElement:H,clear:T,destroy:()=>{T(),f.clear()}}},Bt=(e,r,t,a)=>{let n=document.createElement("div");if(n.className=`${r}`,n.setAttribute("role","listbox"),n.setAttribute("tabindex","0"),t)n.setAttribute("aria-label",t);if(a)n.classList.add(`${r}--horizontal`),n.setAttribute("aria-orientation","horizontal");let i=document.createElement("div");if(i.className=`${r}-viewport`,i.style.height="100%",i.style.width="100%",a)i.style.overflowX="auto",i.style.overflowY="hidden";else i.style.overflow="auto";let l=document.createElement("div");if(l.className=`${r}-content`,l.style.position="relative",a)l.style.height="100%";else l.style.width="100%";let o=document.createElement("div");if(o.className=`${r}-items`,o.style.position="relative",a)o.style.height="100%";else o.style.width="100%";return l.appendChild(o),i.appendChild(l),n.appendChild(i),e.appendChild(n),{root:n,viewport:i,content:l,items:o}},Ot=(e,r)=>{e.style.height=`${r}px`},Vt=(e,r)=>{e.style.width=`${r}px`},Wt=(e)=>({width:e.clientWidth,height:e.clientHeight}),_t=(e)=>{if(typeof e==="string"){let r=document.querySelector(e);if(!r)throw Error(`[vlist] Container not found: ${e}`);return r}return e},ke=(e,r,t,a,n,i)=>{if(a===0||r===0)return i.start=0,i.end=-1,i;let l=t.indexAtOffset(e),o=t.indexAtOffset(e+r);if(o<a-1)o++;return i.start=Math.max(0,l),i.end=Math.min(a-1,Math.max(0,o)),i},De=(e,r,t,a)=>{if(t===0)return a.start=0,a.end=-1,a;return a.start=Math.max(0,e.start-r),a.end=Math.min(t-1,e.end+r),a},$t=(e,r,t,a,n,i)=>{if(a===0)return 0;let l=Math.max(0,Math.min(e,a-1)),o=r.getOffset(l),u=r.getHeight(l),f=r.getTotalHeight(),d=Math.max(0,f-t),c;switch(i){case"center":c=o-t/2+u/2;break;case"end":c=o-t+u;break;case"start":default:c=o;break}return Math.max(0,Math.min(c,d))};var Yt=(e,r,t,a,n,i=ke)=>{let l={start:0,end:0},o={start:0,end:0};return i(0,e,r,t,n,l),De(l,a,t,o),{scrollTop:0,containerHeight:e,totalHeight:n.virtualHeight,actualHeight:n.actualHeight,isCompressed:n.isCompressed,compressionRatio:n.ratio,visibleRange:l,renderRange:o}},Xt=(e,r,t,a,n,i,l=ke)=>{return l(r,e.containerHeight,t,a,i,e.visibleRange),De(e.visibleRange,n,a,e.renderRange),e.scrollTop=r,e},rt=(e,r,t,a,n,i,l=ke)=>{return l(e.scrollTop,r,t,a,i,e.visibleRange),De(e.visibleRange,n,a,e.renderRange),e.containerHeight=r,e.totalHeight=i.virtualHeight,e.actualHeight=i.actualHeight,e.isCompressed=i.isCompressed,e.compressionRatio=i.ratio,e},Gt=(e,r,t,a,n,i=ke)=>{return i(e.scrollTop,e.containerHeight,r,t,n,e.visibleRange),De(e.visibleRange,a,t,e.renderRange),e.totalHeight=n.virtualHeight,e.actualHeight=n.actualHeight,e.isCompressed=n.isCompressed,e.compressionRatio=n.ratio,e},Zt=(e,r,t,a,n="start",i,l=$t)=>{return l(e,r,t,a,i,n)};var Kt=3,qt="vlist",at=200,ze=50,Nt=25,jt=2,Ut=50,it=16000000,Te=(e,r)=>{let t=r.getTotalHeight(),a=t>it,n=a?it:t,i=t>0?n/t:1;return{isCompressed:a,actualHeight:t,virtualHeight:n,ratio:i}},Le=(e,r,t,a,n,i)=>{if(a===0||r===0)return i.start=0,i.end=-1,i;if(!n.isCompressed){let I=t.indexAtOffset(e),h=t.indexAtOffset(e+r);if(h<a-1)h++;return i.start=Math.max(0,I),i.end=Math.min(a-1,Math.max(0,h)),i}let{virtualHeight:l}=n,o=e/l*a,u=Math.floor(o),f=Dt(t,Math.max(0,u),r,a),d=Math.ceil(o)+f,c=l-r-e;if(c<=r&&c>=-1){let I=gt(t,r,a),h=Math.max(0,a-I),S=Math.max(0,Math.min(1,1-c/r));u=Math.floor(u+(h-u)*S),d=c<=1?a-1:Math.min(a-1,u+f)}return i.start=Math.max(0,u),i.end=Math.min(a-1,Math.max(0,d)),i};var ut=(e,r,t,a,n,i,l)=>{if(!i.isCompressed||a===0)return t.getOffset(e);let{virtualHeight:o}=i,u=o-n,f=u-r;if(f<=n&&f>=-1){if(r>=u-1){let b=t.getTotalHeight()-t.getOffset(e);return n-b}let c=gt(t,n,a),I=Math.max(0,a-c),h=r/o*a,S=Math.max(0,Math.min(1,1-f/n)),v=t.getOffset(e)-t.getOffset(I),p=t.getOffset(e)-tt(t,h,a);return p+(v-p)*S}let d=r/o*a;return t.getOffset(e)-tt(t,d,a)},Qt=(e,r,t,a,n,i="start")=>{if(a===0)return 0;let l;if(n.isCompressed){if(i==="end"&&e===a-1)return Math.max(0,n.virtualHeight-t);l=e/a*n.virtualHeight}else l=r.getOffset(e);let o=r.getHeight(e);switch(i){case"center":l-=(t-o)/2;break;case"end":l-=t-o;break}let u=n.virtualHeight-t;return Math.max(0,Math.min(l,u))};var Jt=()=>{let e={},r=(a,n)=>{if(!e[a])e[a]=new Set;return e[a].add(n),()=>t(a,n)},t=(a,n)=>{e[a]?.delete(n)};return{on:r,off:t,emit:(a,n)=>{e[a]?.forEach((i)=>{try{i(n)}catch(l){console.error(`[vlist] Error in event handler for "${String(a)}":`,l)}})},once:(a,n)=>{let i=(l)=>{t(a,i),n(l)};return r(a,i)},clear:(a)=>{if(a)delete e[a];else for(let n in e)delete e[n]},listenerCount:(a)=>{return e[a]?.size??0}}},er=(e)=>({selected:new Set(e??[]),focusedIndex:-1}),Xe=(e,r,t)=>{if(t==="none")return e;let a=new Set(e.selected);if(t==="single"){if(a.clear(),r.length>0)a.add(r[0])}else for(let n of r)a.add(n);return{...e,selected:a}},ht=(e,r)=>{let t=new Set(e.selected);for(let a of r)t.delete(a);return{...e,selected:t}},Ge=(e,r,t)=>{if(t==="none")return e;if(e.selected.has(r))return ht(e,[r]);else return Xe(e,[r],t)},tr=(e,r,t)=>{if(t!=="multiple")return e;return{...e,selected:new Set(r.map((a)=>a.id))}},rr=(e)=>({...e,selected:new Set}),ar=(e,r)=>{return e.focusedIndex=r,e},ir=(e,r,t=!0)=>{if(r===0)return e;let a=e.focusedIndex-1;if(a<0)a=t?r-1:0;return e.focusedIndex=a,e},nr=(e,r,t=!0)=>{if(r===0)return e;let a=e.focusedIndex+1;if(a>=r)a=t?0:r-1;return e.focusedIndex=a,e},lr=(e,r)=>{if(r===0)return e;return e.focusedIndex=0,e},or=(e,r)=>{if(r===0)return e;return e.focusedIndex=r-1,e},sr=(e,r)=>{return e.selected.has(r)},Pe=(e)=>{return Array.from(e.selected)},Fe=(e,r)=>{let t=[];for(let a of e.selected){let n=r(a);if(n)t.push(n)}return t},nt=(e,r,t={},a="vlist",n=!1)=>{let{autoHide:i=!0,autoHideDelay:l=1000,minThumbSize:o=30,showOnHover:u=!0,hoverZoneWidth:f=16,showOnViewportEnter:d=!0}=t,c=0,I=0,h=0,S=0,v=!1,p=!1,b=0,E=0,W=0,F=null,G=!1,V=null,j=null,_=n?"width":"height",le=n?"translateX":"translateY",ae=n?(Z)=>Z.clientX:(Z)=>Z.clientY,te=n?"left":"top",O=document.createElement("div"),re=document.createElement("div"),x=u?document.createElement("div"):null,H=()=>{if(O.className=`${a}-scrollbar`,re.className=`${a}-scrollbar-thumb`,n)O.classList.add(`${a}-scrollbar--horizontal`);if(O.appendChild(re),e.appendChild(O),x){if(x.className=`${a}-scrollbar-hover`,n)x.classList.add(`${a}-scrollbar-hover--horizontal`),x.style.height=`${f}px`;else x.style.width=`${f}px`;e.appendChild(x)}},T=()=>{if(F)clearTimeout(F),F=null},s=()=>{if(!i)return;T(),F=setTimeout(C,l)},g=()=>{if(c<=I)return;if(T(),!G)O.classList.add(`${a}-scrollbar--visible`),G=!0;if(i&&!v&&!p)s()},C=()=>{if(v||p)return;O.classList.remove(`${a}-scrollbar--visible`),G=!1},z=(Z,P)=>{c=Z,I=P;let w=c>I;if(O.style.display=w?"":"none",!w){C();return}let L=I/c;h=Math.max(o,L*I),re.style[_]=`${h}px`,S=I-h,k(W)},k=(Z)=>{if(W=Z,c<=I||S<=0)return;let P=c-I,w=Math.min(1,Math.max(0,Z/P))*S;re.style.transform=`${le}(${w}px)`},M=(Z)=>{if(Z.target===re)return;let P=O.getBoundingClientRect(),w=ae(Z)-P[te]-h/2,L=Math.max(0,Math.min(w,S))/S,Y=c-I,ee=L*Y;r(ee),g()},K=(Z)=>{Z.preventDefault(),Z.stopPropagation(),v=!0,b=ae(Z),E=W,T(),O.classList.add(`${a}-scrollbar--dragging`),document.addEventListener("mousemove",U),document.addEventListener("mouseup",m)},U=(Z)=>{if(!v)return;let P=ae(Z)-b,w=S>0?P/S:0,L=c-I,Y=w*L,ee=Math.max(0,Math.min(E+Y,L)),N=ee/L*S;if(re.style.transform=`${le}(${N}px)`,j=ee,V===null)V=requestAnimationFrame(()=>{if(j!==null)r(j);V=null})},m=()=>{if(v=!1,V!==null)cancelAnimationFrame(V),V=null;if(j!==null)r(j),j=null;if(O.classList.remove(`${a}-scrollbar--dragging`),i&&!p)s();document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",m)},D=()=>{if(d)g()},A=()=>{if(!v){if(p=!1,i)s()}},$=()=>{p=!0,T(),g()},Q=()=>{if(p=!1,!v&&i)s()},q=()=>{if(T(),V!==null)cancelAnimationFrame(V),V=null;if(O.removeEventListener("click",M),O.removeEventListener("mouseenter",$),O.removeEventListener("mouseleave",Q),re.removeEventListener("mousedown",K),e.removeEventListener("mouseenter",D),e.removeEventListener("mouseleave",A),document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",m),x){if(x.removeEventListener("mouseenter",$),x.removeEventListener("mouseleave",Q),x.parentNode)x.parentNode.removeChild(x)}if(O.parentNode)O.parentNode.removeChild(O)};if(H(),O.addEventListener("click",M),O.addEventListener("mouseenter",$),O.addEventListener("mouseleave",Q),re.addEventListener("mousedown",K),e.addEventListener("mouseenter",D),e.addEventListener("mouseleave",A),x)x.addEventListener("mouseenter",$),x.addEventListener("mouseleave",Q);return{show:g,hide:C,updateBounds:z,updatePosition:k,isVisible:()=>G,destroy:q}},lt=(e=0)=>{let r=[,,,,,,,,];for(let t=0;t<8;t++)r[t]={position:0,time:0};return{velocity:0,lastPosition:e,lastTime:performance.now(),samples:r,sampleIndex:0,sampleCount:0}},Re=(e,r)=>{let t=performance.now(),a=t-e.lastTime;if(a===0)return e;if(a>100){e.sampleCount=0,e.sampleIndex=0,e.velocity=0;let i=e.samples[0];return i.position=r,i.time=t,e.sampleIndex=1,e.sampleCount=1,e.lastPosition=r,e.lastTime=t,e}let n=e.samples[e.sampleIndex];if(n.position=r,n.time=t,e.sampleIndex=(e.sampleIndex+1)%8,e.sampleCount=Math.min(e.sampleCount+1,8),e.sampleCount>=2){let i=(e.sampleIndex-e.sampleCount+8)%8,l=e.samples[i],o=r-l.position,u=t-l.time;e.velocity=u>0?o/u:0}return e.lastPosition=r,e.lastTime=t,e},dr=(e)=>e.sampleCount>=3,cr=(e,r={})=>{let{wheel:t=!0,sensitivity:a=1,smoothing:n=!1,idleTimeout:i=150,onScroll:l,onIdle:o,scrollElement:u,horizontal:f=!1}=r,d=!!u,c=0,I=0,h=d?f?window.innerWidth:window.innerHeight:f?e.clientWidth:e.clientHeight,S=r.compressed??!1,v=r.compression,p=lt(),b=!1,E=null,W=ot(()=>{let m=f?e.scrollLeft:e.scrollTop,D=m>=c?"down":"up";if(p=Re(p,m),c=m,l)l({scrollTop:c,direction:D,velocity:p.velocity});_()}),F=ot(()=>{let m=e.getBoundingClientRect(),D=f?Math.max(0,-m.left):Math.max(0,-m.top),A=D>=c?"down":"up";if(p=Re(p,D),c=D,!b)b=!0;if(l)l({scrollTop:c,direction:A,velocity:p.velocity});_()}),G=(m)=>{m.preventDefault()},V=(m)=>{if(m.deltaX)return;m.preventDefault(),e.scrollLeft+=m.deltaY},j=(m)=>{if(!S)return;m.preventDefault();let D=(f?m.deltaX||m.deltaY:m.deltaY)*a,A=c+D;if(n)A=c+D*0.3;if(A=Math.max(0,Math.min(A,I)),A!==c){let $=A>=c?"down":"up";if(p=Re(p,A),c=A,!b)b=!0;if(l)l({scrollTop:c,direction:$,velocity:p.velocity});_()}},_=()=>{if(E)clearTimeout(E);E=setTimeout(()=>{if(b=!1,p=lt(c),o)o()},i)},le=(m)=>{if(S)return;if(S=!0,v=m,I=m.virtualHeight-h,d)return;if(W.cancel(),e.removeEventListener("scroll",W),!t)e.removeEventListener("wheel",G);else if(f)e.removeEventListener("wheel",V);if(f)e.style.overflowX="hidden";else e.style.overflow="hidden";if(t)e.addEventListener("wheel",j,{passive:!1});let D=f?e.scrollLeft:e.scrollTop;if(D>0){let A=f?v?.actualHeight??e.scrollWidth:v?.actualHeight??e.scrollHeight;c=D/A*I}if(f)e.scrollLeft=0;else e.scrollTop=0},ae=()=>{if(!S)return;if(S=!1,d){v=void 0;return}if(e.removeEventListener("wheel",j),f)e.style.overflowX="auto";else e.style.overflow="auto";if(e.addEventListener("scroll",W,{passive:!0}),!t)e.addEventListener("wheel",G,{passive:!1});else if(f)e.addEventListener("wheel",V,{passive:!1});if(v&&c>0){let m=c/I*(v.actualHeight-h);if(f)e.scrollLeft=m;else e.scrollTop=m}v=void 0},te=()=>{if(d||S)return c;return f?e.scrollLeft:e.scrollTop},O=(m,D=!1)=>{let A=Math.max(0,Math.min(m,I||1/0));if(d){let $=e.getBoundingClientRect();if(f){let Q=$.left+window.scrollX;window.scrollTo({left:Q+A,behavior:D?"smooth":"auto"})}else{let Q=$.top+window.scrollY;window.scrollTo({top:Q+A,behavior:D?"smooth":"auto"})}}else if(S){if(A===c)return;let $=A>=c?"down":"up";if(p=Re(p,A),c=A,!b)b=!0;if(l)l({scrollTop:c,direction:$,velocity:p.velocity});_()}else if(f)e.scrollTo({left:A,behavior:D?"smooth":"auto"});else e.scrollTo({top:A,behavior:D?"smooth":"auto"})},re=(m)=>{O(te()+m)},x=()=>{return te()<=0},H=(m=0)=>{let D=te(),A=d||S?I:f?e.scrollWidth-e.clientWidth:e.scrollHeight-e.clientHeight;return D>=A-m},T=()=>{let m=te(),D=d||S?I:f?e.scrollWidth-e.clientWidth:e.scrollHeight-e.clientHeight;if(D<=0)return 0;return Math.min(1,Math.max(0,m/D))},s=(m)=>{if(m.compression)v=m.compression,I=v.virtualHeight-h},g=()=>S,C=()=>Math.abs(p.velocity),z=()=>dr(p),k=()=>b,M=()=>d,K=(m)=>{if(h=m,v)I=v.virtualHeight-h},U=()=>{if(E)clearTimeout(E);if(d)F.cancel(),window.removeEventListener("scroll",F);else W.cancel(),e.removeEventListener("scroll",W),e.removeEventListener("wheel",j),e.removeEventListener("wheel",G),e.removeEventListener("wheel",V)};if(d){if(S&&v)I=v.virtualHeight-h;window.addEventListener("scroll",F,{passive:!0})}else if(S&&v){if(I=v.virtualHeight-h,f)e.style.overflowX="hidden";else e.style.overflow="hidden";if(t)e.addEventListener("wheel",j,{passive:!1})}else{if(f)e.style.overflowX="auto",e.style.overflowY="hidden";else e.style.overflow="auto";if(e.addEventListener("scroll",W,{passive:!0}),!t)e.addEventListener("wheel",G,{passive:!1});else if(f)e.addEventListener("wheel",V,{passive:!1})}return{getScrollTop:te,scrollTo:O,scrollBy:re,isAtTop:x,isAtBottom:H,getScrollPercentage:T,getVelocity:C,isTracking:z,isScrolling:k,updateConfig:s,enableCompression:le,disableCompression:ae,isCompressed:g,isWindowMode:M,updateContainerHeight:K,destroy:U}},ot=(e)=>{let r=null,t=null,a=(...n)=>{if(t=n,r===null)r=requestAnimationFrame(()=>{if(r=null,t)e(...t)})};return a.cancel=()=>{if(r!==null)cancelAnimationFrame(r),r=null},a},fr=(e={})=>{let{chunkSize:r=100,maxCachedItems:t=5000,evictionBuffer:a=200,onEvict:n}=e,i=new Map,l=0,o=0,u=(x)=>{let H=i.get(x);if(!H)H={items:Array(r),count:0,lastAccess:Date.now()},i.set(x,H);else H.lastAccess=Date.now();return H},f=(x)=>{return Math.floor(x/r)},d=(x)=>{return x%r},c=()=>l,I=(x)=>{l=x},h=(x)=>{if(x<0||x>=l)return;let H=f(x),T=i.get(H);if(!T)return;return T.items[d(x)]},S=(x)=>{if(x<0||x>=l)return!1;let H=f(x),T=i.get(H);if(!T)return!1;return T.items[d(x)]!==void 0},v=(x,H)=>{let T=f(x),s=u(T),g=d(x),C=s.items[g]===void 0;if(s.items[g]=H,C)s.count++,o++;if(x>=l)l=x+1},p=(x,H)=>{for(let T=0;T<H.length;T++){let s=H[T];if(s!==void 0)v(x+T,s)}},b=(x)=>{if(x<0||x>=l)return!1;let H=f(x),T=i.get(H);if(!T)return!1;let s=d(x);if(T.items[s]===void 0)return!1;if(T.items[s]=void 0,T.count--,o--,T.count===0)i.delete(H);return!0},E=(x,H)=>{let T=[];for(let s=x;s<=H&&s<l;s++)T.push(h(s));return T},W=(x,H)=>{for(let T=x;T<=H&&T<l;T++)if(!S(T))return!1;return!0},F=()=>{let x=[],H=null,T=Array.from(i.keys()).sort((s,g)=>s-g);for(let s of T){let g=i.get(s);if(!g)continue;let C=s*r;for(let z=0;z<r;z++){let k=C+z;if(k>=l)break;if(g.items[z]!==void 0)if(H===null)H={start:k,end:k};else if(k===H.end+1)H.end=k;else x.push(H),H={start:k,end:k};else if(H!==null)x.push(H),H=null}}if(H!==null)x.push(H);return x},G=(x,H)=>{let T=[],s=null;for(let g=x;g<=H&&g<l;g++)if(!S(g))if(s===null)s={start:g,end:g};else s.end=g;else if(s!==null)T.push(s),s=null;if(s!==null)T.push(s);return T},V=(x)=>{return i.has(x)},j=(x)=>{let H=i.get(x);if(H)H.lastAccess=Date.now()},_=(x,H)=>{if(x>H||i.size===0)return;let T=Date.now(),s=f(Math.max(0,x)),g=f(Math.min(l-1,H));for(let C=s;C<=g;C++){let z=i.get(C);if(z)z.lastAccess=T}},le=(x,H)=>{if(o<=t)return 0;let T=Math.max(0,x-a),s=Math.min(l-1,H+a),g=f(T),C=f(s),z=0,k=[];for(let[M,K]of i)if(M<g||M>C)z+=K.count,k.push(M),o-=K.count,i.delete(M);if(z>0&&n)n(z,k);return z},ae=()=>{if(o<=t)return 0;let x=Array.from(i.entries()).sort(([,s],[,g])=>s.lastAccess-g.lastAccess),H=0,T=[];for(let[s,g]of x){if(o<=t)break;H+=g.count,o-=g.count,T.push(s),i.delete(s)}if(H>0&&n)n(H,T);return H},te=()=>{return{totalItems:l,cachedItems:o,cachedChunks:i.size,chunkSize:r,maxCachedItems:t,memoryEfficiency:l>0?1-o/l:1}},O=()=>o,re=()=>{i.clear(),o=0};return{chunkSize:r,maxCachedItems:t,getTotal:c,setTotal:I,get:h,has:S,set:v,setRange:p,delete:b,getRange:E,isRangeLoaded:W,getLoadedRanges:F,findUnloadedRanges:G,getChunkIndex:f,isChunkLoaded:V,touchChunk:j,touchChunksForRange:_,evictDistant:le,evictToLimit:ae,getStats:te,getCachedCount:O,clear:re,reset:()=>{re(),l=0}}},gr=(e)=>{if(e.length===0)return[];let r=[...e].sort((a,n)=>a.start-n.start),t=[{...r[0]}];for(let a=1;a<r.length;a++){let n=r[a],i=t[t.length-1];if(n.start<=i.end+1)i.end=Math.max(i.end,n.end);else t.push({...n})}return t},ur=(e,r,t)=>{let a=Math.floor(e.start/t)*t,n=Math.ceil((e.end+1)/t)*t-1,i={start:a,end:n};if(r.length===0)return[i];let l=[],o=gr(r),u=i.start;for(let f of o){if(f.end<u)continue;if(f.start>i.end)break;if(f.start>u)l.push({start:u,end:Math.min(f.start-1,i.end)});if(u=f.end+1,u>i.end)break}if(u<=i.end)l.push({start:u,end:i.end});return l},hr=(e={})=>{let{enabled:r=!0,maskCharacter:t="â–ˆ",randomVariance:a=!0,maxSampleSize:n=20,customGenerator:i}=e,l=null,o=!1,u=0,f=(h)=>{if(!r||o||h.length===0)return;let S=new Map,v=new Map,p=Math.min(h.length,n);for(let b=0;b<p;b++){let E=h[b];if(!E||typeof E!=="object")continue;for(let[W,F]of Object.entries(E)){if(W.startsWith("_")||W==="id")continue;if(!v.has(W))v.set(W,{lengths:[],types:new Set});let G=v.get(W),V=Array.isArray(F)?"array":typeof F;if(G.types.add(V),typeof F==="string")G.lengths.push(F.length);else if(F!==null&&F!==void 0)G.lengths.push(String(F).length)}}for(let[b,E]of v){if(E.lengths.length===0)continue;let W=Math.min(...E.lengths),F=Math.max(...E.lengths),G=Math.round(E.lengths.reduce((j,_)=>j+_,0)/E.lengths.length),V="string";if(E.types.has("number")&&E.types.size===1)V="number";else if(E.types.has("boolean")&&E.types.size===1)V="boolean";else if(E.types.has("array"))V="array";else if(E.types.has("object")&&!E.types.has("string"))V="object";S.set(b,{minLength:W,maxLength:F,avgLength:G,type:V})}l=S,o=!0},d=()=>o,c=(h)=>{let S=h.avgLength;if(a&&h.minLength!==h.maxLength){if(S=Math.floor(Math.random()*(h.maxLength-h.minLength+1)+h.minLength),Math.random()<0.3)S=Math.max(1,S+Math.floor(Math.random()*3)-1)}return t.repeat(Math.max(1,S))},I=(h)=>{if(i)return{...i(h),["_isPlaceholder"]:!0};let S={id:`__placeholder_${u++}`,["_isPlaceholder"]:!0,_index:h};if(!l||l.size===0)return S.label=t.repeat(12),S;for(let[v,p]of l)switch(p.type){case"string":S[v]=c(p);break;case"number":S[v]=0;break;case"boolean":S[v]=!1;break;case"array":S[v]=[];break;case"object":S[v]={};break;default:S[v]=c(p)}return S};return{analyzeStructure:f,hasAnalyzedStructure:d,generate:I,generateRange:(h,S)=>{let v=[];for(let p=h;p<=S;p++)v.push(I(p));return v},isPlaceholder:(h)=>{if(!h||typeof h!=="object")return!1;return h._isPlaceholder===!0},getPlaceholderKey:()=>"_isPlaceholder",clear:()=>{l=null,o=!1,u=0}}},_e=(e)=>{if(!e||typeof e!=="object")return!1;return e._isPlaceholder===!0};var mr=50,pr=(e={})=>{let{adapter:r,initialItems:t,initialTotal:a,storage:n,placeholder:i,pageSize:l=mr,onStateChange:o,onItemsLoaded:u,onItemsEvicted:f}=e,d=fr({...n,onEvict:(w,L)=>{f?.(w),F()}}),c=null,I=()=>{if(!c)c=hr(i);return c},h=new Map,S=!1,v,p=!0,b,E=[],W=new Map,F=()=>{o?.(re())},G=()=>{h.clear();let w=d.getLoadedRanges();for(let L of w)for(let Y=L.start;Y<=L.end;Y++){let ee=d.get(Y);if(ee&&!_e(ee))h.set(ee.id,Y)}},V=(w,L)=>{if(!_e(L))h.set(L.id,w)},j=(w)=>{h.delete(w)},_=(w,L)=>{return`${w}-${L}`},le=()=>d.getTotal(),ae=()=>d.getCachedCount(),te=()=>S,O=()=>p,re=()=>({total:d.getTotal(),cached:d.getCachedCount(),isLoading:S,pendingRanges:E,error:v,hasMore:p,cursor:b}),x=()=>d,H=()=>I(),T=(w)=>{let L=d.get(w);if(L!==void 0)return L;if(w>=0&&w<d.getTotal())return I().generate(w);return},s=(w)=>{let L=h.get(w);if(L===void 0)return;return d.get(L)},g=(w)=>{return h.get(w)??-1},C=(w)=>{let L=d.get(w);return L!==void 0&&!_e(L)},z=(w,L)=>{let Y=[],ee=d.getTotal(),N=0,oe=0;d.touchChunksForRange(w,Math.min(L,ee-1));for(let ce=w;ce<=L&&ce<ee;ce++){let fe=d.get(ce);if(fe!==void 0)Y.push(fe),N++;else Y.push(I().generate(ce)),oe++}return Y},k=(w)=>{d.setTotal(w),p=d.getCachedCount()<w,F()},M=(w,L=0,Y)=>{if(c&&!c.hasAnalyzedStructure()&&w.length>0)c.analyzeStructure(w);for(let ee=0;ee<w.length;ee++){let N=w[ee];if(N!==void 0){let oe=L+ee;d.set(oe,N),V(oe,N)}}if(Y!==void 0)d.setTotal(Y);else if(L+w.length>d.getTotal())d.setTotal(L+w.length);p=d.getCachedCount()<d.getTotal(),u?.(w,L,d.getTotal()),F()},K=(w,L)=>{let Y=h.get(w);if(Y===void 0)return!1;let ee=d.get(Y);if(!ee)return!1;let N={...ee,...L};if(d.set(Y,N),L.id!==void 0&&L.id!==w)j(w),V(Y,N);return F(),!0},U=(w)=>{let L=h.get(w);if(L===void 0)return!1;d.delete(L),j(w);let Y=d.getTotal();if(Y>0)d.setTotal(Y-1);return F(),!0},m=async(w,L)=>{if(!r)return;let Y=_(w,L);if(W.has(Y))return;let ee=d.getLoadedRanges(),N=ur({start:w,end:L},ee,d.chunkSize);if(N.length===0)return;let oe=d.chunkSize,ce=[];for(let J of N){let me=Math.floor(J.start/oe),ve=Math.floor(J.end/oe);for(let ne=me;ne<=ve;ne++){let ge=ne*oe,ie=ge+oe-1,Ce=_(ge,ie);if(!ce.some((he)=>he.start===ge)&&!W.has(Ce))ce.push({start:ge,end:ie})}}let fe=[];for(let J of N){let me=Math.floor(J.start/oe),ve=Math.floor(J.end/oe);for(let ne=me;ne<=ve;ne++){let ge=ne*oe,ie=ge+oe-1,Ce=_(ge,ie);if(W.has(Ce)){let he=W.get(Ce);if(!fe.includes(he))fe.push(he)}}}for(let J of ce){let me=_(J.start,J.end),ve=(async()=>{E.push(J),S=!0,v=void 0,F();try{let ne=J.end-J.start+1,ge={offset:J.start,limit:ne,cursor:void 0},ie=await r.read(ge);if(M(ie.items,J.start,ie.total),ie.cursor)b=ie.cursor;if(ie.hasMore!==void 0)p=ie.hasMore;else if(ie.total!==void 0)p=d.getCachedCount()<ie.total}catch(ne){v=ne instanceof Error?ne:Error(String(ne))}finally{W.delete(me),E=E.filter((ne)=>ne.start!==J.start||ne.end!==J.end),S=W.size>0,F()}})();W.set(me,ve),fe.push(ve)}await Promise.all(fe)},D=async(w,L)=>{if(d.isRangeLoaded(w,L))return;await m(w,L)},A=async()=>{if(!r)return;await m(0,l-1)},$=async()=>{if(!r||S||!p)return!1;let w=d.getCachedCount(),L=d.getTotal(),Y=w,ee=Math.min(Y+l-1,L>0?L-1:Y+l-1);if(Y>=L&&L>0)return p=!1,!1;return await m(Y,ee),d.getCachedCount()>w},Q=async()=>{if(d.clear(),h.clear(),c)c.clear();b=void 0,p=!0,v=void 0,F(),await A()},q=(w,L)=>{if(d.evictDistant(w,L)>0)G()},Z=()=>{d.clear(),h.clear(),b=void 0,v=void 0,E=[],S=!1,F()},P=()=>{if(d.reset(),h.clear(),c)c.clear();b=void 0,p=!0,v=void 0,E=[],S=!1,F()};if(t&&t.length>0)M(t,0,a??t.length);else if(a!==void 0)d.setTotal(a);return{getState:re,getTotal:le,getCached:ae,getIsLoading:te,getHasMore:O,getStorage:x,getPlaceholders:H,getItem:T,getItemById:s,getIndexById:g,isItemLoaded:C,getItemsInRange:z,setTotal:k,setItems:M,updateItem:K,removeItem:U,loadRange:m,ensureRange:D,loadInitial:A,loadMore:$,reload:Q,evictDistant:q,clear:Z,reset:P}},vr=(e,r,t,a,n,i,l,o,u,f,d,c)=>{let I=u,h={scrollTop:0,totalItems:0,containerHeight:0,rangeStart:0},S=(b)=>{return a.getItemsInRange(b.start,b.end)},v=()=>{let b=a.getTotal();return a.getItemsInRange(0,b-1)},p=f??(()=>a.getTotal());return{config:e,dom:r,heightCache:t,dataManager:a,scrollController:n,renderer:i,emitter:l,scrollbar:o,state:I,getItemsForRange:S,getAllLoadedItems:v,getCompressionContext:()=>{return h.scrollTop=I.viewportState.scrollTop,h.totalItems=p(),h.containerHeight=I.viewportState.containerHeight,h.rangeStart=I.viewportState.renderRange.start,h},getCachedCompression:()=>{let b=p();if(I.cachedCompression&&I.cachedCompression.totalItems===b)return I.cachedCompression.state;let E=Te(b,t);return I.cachedCompression={state:E,totalItems:b},E},getVirtualTotal:p,visibleRangeFn:d,scrollToIndexFn:c}},xr=(e,r)=>{let t=null,a=null,n=0,i=()=>{if(a&&e.config.hasAdapter){let o=a;a=null,e.dataManager.ensureRange(o.start,o.end).catch((u)=>{e.emitter.emit("error",{error:u,context:"ensureRange"})})}},l=(o,u)=>{if(e.state.isDestroyed)return;let f=e.scrollController.getVelocity(),d=e.scrollController.isTracking(),{cancelLoadThreshold:c,preloadThreshold:I,preloadAhead:h}=e.config,S=d&&f<=c;if(a&&n>c&&f<=c){let b=a;a=null,e.dataManager.ensureRange(b.start,b.end).catch((E)=>{e.emitter.emit("error",{error:E,context:"ensureRange"})})}n=f;let v=e.getVirtualTotal();if(e.state.viewportState=Xt(e.state.viewportState,o,e.heightCache,v,e.config.overscan,e.getCachedCompression(),e.visibleRangeFn),e.scrollbar)e.scrollbar.updatePosition(o),e.scrollbar.show();if(r(),e.emitter.emit("scroll",{scrollTop:o,direction:u}),S&&e.config.hasAdapter&&!e.dataManager.getIsLoading()&&e.dataManager.getHasMore()){if(e.config.reverse){if(o<at)e.emitter.emit("load:start",{offset:e.dataManager.getCached(),limit:ze}),e.dataManager.loadMore().catch((b)=>{e.emitter.emit("error",{error:b,context:"loadMore"})})}else if(e.state.viewportState.totalHeight-o-e.state.viewportState.containerHeight<at)e.emitter.emit("load:start",{offset:e.dataManager.getCached(),limit:ze}),e.dataManager.loadMore().catch((b)=>{e.emitter.emit("error",{error:b,context:"loadMore"})})}let{renderRange:p}=e.state.viewportState;if(!t||p.start!==t.start||p.end!==t.end)if(t={start:p.start,end:p.end},S){a=null;let{start:b,end:E}=p;if(f>I)if(u==="down")E=Math.min(p.end+h,v-1);else b=Math.max(p.start-h,0);e.dataManager.ensureRange(b,E).catch((W)=>{e.emitter.emit("error",{error:W,context:"ensureRange"})})}else a={start:p.start,end:p.end}};return l.loadPendingRange=i,l},wr=(e,r)=>{return(t)=>{if(e.state.isDestroyed)return;let a=t.target.closest("[data-index]");if(!a)return;let n=parseInt(a.dataset.index??"-1",10);if(n<0)return;let i=e.dataManager.getItem(n);if(!i)return;if(e.emitter.emit("item:click",{item:i,index:n,event:t}),e.config.selectionMode!=="none"){e.state.selectionState=ar(e.state.selectionState,n),e.dom.root.setAttribute("aria-activedescendant",`${e.config.ariaIdPrefix}-item-${n}`),e.state.selectionState=Ge(e.state.selectionState,i.id,e.config.selectionMode);let l=e.getItemsForRange(e.state.viewportState.renderRange),o=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(l,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,o),e.emitter.emit("selection:change",{selected:Pe(e.state.selectionState),items:Fe(e.state.selectionState,(u)=>e.dataManager.getItemById(u))})}}},yr=(e,r)=>{return(t)=>{if(e.state.isDestroyed||e.config.selectionMode==="none")return;let a=e.dataManager.getTotal(),n=e.state.selectionState.focusedIndex,i=!1,l=!1,o=e.state.selectionState;switch(t.key){case"ArrowUp":o=ir(e.state.selectionState,a),i=!0,l=!0;break;case"ArrowDown":o=nr(e.state.selectionState,a),i=!0,l=!0;break;case"Home":o=lr(e.state.selectionState,a),i=!0,l=!0;break;case"End":o=or(e.state.selectionState,a),i=!0,l=!0;break;case" ":case"Enter":if(e.state.selectionState.focusedIndex>=0){let u=e.dataManager.getItem(e.state.selectionState.focusedIndex);if(u)o=Ge(e.state.selectionState,u.id,e.config.selectionMode);i=!0}break}if(i){t.preventDefault(),e.state.selectionState=o;let u=e.state.selectionState.focusedIndex;if(u>=0)r(u,"center"),e.dom.root.setAttribute("aria-activedescendant",`${e.config.ariaIdPrefix}-item-${u}`);else e.dom.root.removeAttribute("aria-activedescendant");if(l){let{selected:f}=e.state.selectionState;if(n>=0&&n!==u){let d=e.dataManager.getItem(n);if(d)e.renderer.updateItemClasses(n,f.has(d.id),!1)}if(u>=0){let d=e.dataManager.getItem(u);if(d)e.renderer.updateItemClasses(u,f.has(d.id),!0)}}else{let f=e.getItemsForRange(e.state.viewportState.renderRange),d=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(f,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,d)}if(t.key===" "||t.key==="Enter")e.emitter.emit("selection:change",{selected:Pe(e.state.selectionState),items:Fe(e.state.selectionState,(f)=>e.dataManager.getItemById(f))})}}},Ir=(e)=>({setItems:(r)=>{e.dataManager.setItems(r,0,r.length)},appendItems:(r)=>{let t=e.dataManager.getState().total;e.dataManager.setItems(r,t)},prependItems:(r)=>{let t=e.dataManager.getState().total,a=t>0?e.dataManager.getItemsInRange(0,t-1):[];e.dataManager.clear(),e.dataManager.setItems([...r,...a],0)},updateItem:(r,t)=>{if(e.dataManager.updateItem(r,t)){let a=e.dataManager.getIndexById(r),n=e.dataManager.getItem(a);if(n&&a>=e.state.viewportState.renderRange.start&&a<=e.state.viewportState.renderRange.end)e.renderer.updateItem(a,n,sr(e.state.selectionState,r),e.state.selectionState.focusedIndex===a)}},removeItem:(r)=>{e.dataManager.removeItem(r)},reload:async()=>{if(e.config.hasAdapter)await e.dataManager.reload()}}),$e=300,Sr=(e)=>{if(typeof e==="string")return{align:e,behavior:"auto",duration:$e};if(e&&typeof e==="object")return{align:e.align??"start",behavior:e.behavior??"auto",duration:e.duration??$e};return{align:"start",behavior:"auto",duration:$e}},Mr=(e)=>e<0.5?2*e*e:-1+(4-2*e)*e,Cr=(e)=>{let r=null,t=()=>{if(r!==null)cancelAnimationFrame(r),r=null},a=(i,l,o)=>{if(t(),Math.abs(l-i)<1){e.scrollController.scrollTo(l);return}let u=performance.now(),f=(d)=>{let c=d-u,I=Math.min(c/o,1),h=Mr(I),S=i+(l-i)*h;if(e.scrollController.scrollTo(S),I<1)r=requestAnimationFrame(f);else r=null};r=requestAnimationFrame(f)},n=(i,l)=>{let{align:o,behavior:u,duration:f}=Sr(l),d=e.dataManager.getState();if(e.config.wrap&&d.total>0)i=(i%d.total+d.total)%d.total;let c=Zt(i,e.heightCache,e.state.viewportState.containerHeight,d.total,o,e.getCachedCompression(),e.scrollToIndexFn);if(u==="smooth"){let I=e.scrollController.getScrollTop();a(I,c,f)}else t(),e.scrollController.scrollTo(c)};return{scrollToIndex:n,scrollToItem:(i,l)=>{let o=e.dataManager.getIndexById(i);if(o>=0)n(o,l)},cancelScroll:t,getScrollPosition:()=>{return e.scrollController.getScrollTop()}}},br=(e)=>({getScrollSnapshot:()=>{let r=e.scrollController.getScrollTop(),t=e.getCachedCompression(),a=e.getVirtualTotal(),n=e.state.selectionState.selected.size>0?Array.from(e.state.selectionState.selected):void 0;if(a===0){let u={index:0,offsetInItem:0};if(n)u.selectedIds=n;return u}let i,l;if(t.isCompressed){let u=r/t.virtualHeight*a;i=Math.max(0,Math.min(Math.floor(u),a-1)),l=(u-i)*e.heightCache.getHeight(i)}else i=e.heightCache.indexAtOffset(r),l=r-e.heightCache.getOffset(i);l=Math.max(0,l);let o={index:i,offsetInItem:l};if(n)o.selectedIds=n;return o},restoreScroll:(r)=>{let{index:t,offsetInItem:a,selectedIds:n}=r,i=e.getCachedCompression(),l=e.getVirtualTotal();if(l===0)return;let o=Math.max(0,Math.min(t,l-1)),u;if(i.isCompressed){let d=e.heightCache.getHeight(o),c=d>0?a/d:0;u=(o+c)/l*i.virtualHeight}else u=e.heightCache.getOffset(o)+a;let f=Math.max(0,i.virtualHeight-e.state.viewportState.containerHeight);if(u=Math.max(0,Math.min(u,f)),e.scrollController.scrollTo(u),n&&n.length>0&&e.config.selectionMode!=="none")e.state.selectionState=Xe(e.state.selectionState,n,e.config.selectionMode)}}),Ae=(e)=>{let r=e.getItemsForRange(e.state.viewportState.renderRange),t=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(r,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,t),e.emitter.emit("selection:change",{selected:Pe(e.state.selectionState),items:Fe(e.state.selectionState,(a)=>e.dataManager.getItemById(a))})},Hr=(e)=>({select:(...r)=>{if(e.config.selectionMode==="none")return;e.state.selectionState=Xe(e.state.selectionState,r,e.config.selectionMode),Ae(e)},deselect:(...r)=>{e.state.selectionState=ht(e.state.selectionState,r),Ae(e)},toggleSelect:(r)=>{if(e.config.selectionMode==="none")return;e.state.selectionState=Ge(e.state.selectionState,r,e.config.selectionMode),Ae(e)},selectAll:()=>{if(e.config.selectionMode!=="multiple")return;let r=e.getAllLoadedItems();e.state.selectionState=tr(e.state.selectionState,r,e.config.selectionMode),Ae(e)},clearSelection:()=>{e.state.selectionState=rr(e.state.selectionState);let r=e.getItemsForRange(e.state.viewportState.renderRange),t=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(r,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,t),e.emitter.emit("selection:change",{selected:[],items:[]})},getSelected:()=>{return Pe(e.state.selectionState)},getSelectedItems:()=>{return Fe(e.state.selectionState,(r)=>e.dataManager.getItemById(r))}}),Ye=(e,r)=>{let t=0,a=e.length-1;while(t<a){let n=t+a+1>>>1;if(e[n].headerLayoutIndex<=r)t=n;else a=n-1}return t},st=(e,r)=>{let t=0,a=e.length-1;while(t<a){let n=t+a+1>>>1;if(e[n].firstDataIndex<=r)t=n;else a=n-1}return t},dt=(e,r)=>{if(e===0)return[];let t=[],a=r(0),n=0,i=0;for(let l=1;l<e;l++){let o=r(l);if(o!==a){let u=l-n;t.push({key:a,groupIndex:t.length,headerLayoutIndex:i,firstDataIndex:n,count:u}),i=i+1+u,a=o,n=l}}return t.push({key:a,groupIndex:t.length,headerLayoutIndex:i,firstDataIndex:n,count:e-n}),t},ct=(e,r)=>{if(e.length===0||r.length===0)return[];let t=e.length+r.length,a=Array(t),n=0;for(let i of r){a[n]={id:`__group_header_${i.groupIndex}`,__groupHeader:!0,groupKey:i.key,groupIndex:i.groupIndex},n++;for(let l=0;l<i.count;l++)a[n]=e[i.firstDataIndex+l],n++}return a},ft=(e,r)=>{let t=typeof r==="number"?(a)=>r:r;return(a)=>{let n=e.getEntry(a);if(n.type==="header")return e.getHeaderHeight(n.group.groupIndex);return t(n.dataIndex)}},Lr=(e,r)=>{let t=dt(e,r.getGroupForIndex),a=e+t.length,n=r.headerHeight;return{get totalEntries(){return a},get groupCount(){return t.length},get groups(){return t},getEntry:(i)=>{if(t.length===0)return{type:"item",dataIndex:i,group:{key:"",groupIndex:0,headerLayoutIndex:0,firstDataIndex:0,count:0}};let l=Ye(t,i),o=t[l];if(i===o.headerLayoutIndex)return{type:"header",group:o};let u=i-o.headerLayoutIndex-1;return{type:"item",dataIndex:o.firstDataIndex+u,group:o}},layoutToDataIndex:(i)=>{if(t.length===0)return i;let l=Ye(t,i),o=t[l];if(i===o.headerLayoutIndex)return-1;let u=i-o.headerLayoutIndex-1;return o.firstDataIndex+u},dataToLayoutIndex:(i)=>{if(t.length===0)return i;let l=st(t,i),o=t[l],u=i-o.firstDataIndex;return o.headerLayoutIndex+1+u},getGroupAtLayoutIndex:(i)=>{if(t.length===0)return{key:"",groupIndex:0,headerLayoutIndex:0,firstDataIndex:0,count:0};let l=Ye(t,i);return t[l]},getGroupAtDataIndex:(i)=>{if(t.length===0)return{key:"",groupIndex:0,headerLayoutIndex:0,firstDataIndex:0,count:0};let l=st(t,i);return t[l]},getHeaderHeight:typeof n==="number"?(i)=>n:(i)=>{let l=t[i];if(!l)return 0;return n(l.key,i)},rebuild:(i)=>{t=dt(i,r.getGroupForIndex),a=i+t.length}}},Tr=(e,r,t,a,n)=>{let i=document.createElement("div");i.className=`${n}-sticky-header`,i.setAttribute("role","presentation"),i.setAttribute("aria-hidden","true"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.zIndex="5",i.style.pointerEvents="none",i.style.willChange="transform",i.style.overflow="hidden",e.insertBefore(i,e.firstChild);let l=-1,o=!1,u=0,f=(v)=>{if(v===l)return;l=v;let p=r.groups;if(v<0||v>=p.length){i.textContent="";return}let b=p[v],E=a.headerTemplate(b.key,b.groupIndex),W=r.getHeaderHeight(v);if(i.style.height=`${W}px`,typeof E==="string")i.innerHTML=E;else i.replaceChildren(E)},d=(v)=>{let p=r.groups;if(p.length===0){I();return}let b=0;for(let V=p.length-1;V>=0;V--)if(t.getOffset(p[V].headerLayoutIndex)<=v){b=V;break}let E=t.getOffset(p[0].headerLayoutIndex);if(v<E){I();return}if(!o)c();f(b);let W=r.getHeaderHeight(b),F=0,G=b+1;if(G<p.length){let V=t.getOffset(p[G].headerLayoutIndex)-v;if(V<W)F=V-W}if(F!==u)u=F,i.style.transform=F===0?"":`translateY(${Math.round(F)}px)`},c=()=>{if(o)return;o=!0,i.style.display=""},I=()=>{if(!o)return;o=!1,i.style.display="none",l=-1,u=0,i.style.transform=""},h=()=>{let v=l;if(l=-1,v>=0)f(v)},S=()=>{i.remove(),l=-1,o=!1};return i.style.display="none",{update:d,refresh:h,show:c,hide:I,destroy:S}},Er=(e)=>{return e!==null&&typeof e==="object"&&e.__groupHeader===!0},Rr=(e)=>{let r=Math.max(1,Math.floor(e.columns)),t=e.gap??0,a={row:0,col:0},n=(c)=>{if(c<=0)return 0;return Math.ceil(c/r)},i=(c)=>{return a.row=Math.floor(c/r),a.col=c%r,a},l=(c)=>{return Math.floor(c/r)},o=(c)=>{return c%r},u=(c,I,h)=>{if(h<=0)return{start:0,end:-1};let S=Math.max(0,c*r),v=Math.min(h-1,(I+1)*r-1);return{start:S,end:v}},f=(c,I,h)=>{if(I<0||I>=r)return-1;let S=c*r+I;if(S<0||S>=h)return-1;return S},d=(c)=>{let I=(r-1)*t;return Math.max(0,(c-I)/r)};return{columns:r,gap:t,getTotalRows:n,getPosition:i,getRow:l,getCol:o,getItemRange:u,getItemIndex:f,getColumnWidth:d,getColumnOffset:(c,I)=>{let h=d(I);return c*(h+t)}}},Ar=(e=200)=>{let r=[];return{acquire:()=>{let t=r.pop();if(t)return t;let a=document.createElement("div");return a.setAttribute("role","option"),a},release:(t)=>{if(r.length<e)t.className="",t.textContent="",t.removeAttribute("style"),t.removeAttribute("data-index"),t.removeAttribute("data-id"),t.removeAttribute("data-row"),t.removeAttribute("data-col"),r.push(t)},clear:()=>{r.length=0}}},zr=(e,r,t,a,n,i,l,o)=>{let u=Ar(),f=new Map,d=i,c=null,I=0,h="",S=(s)=>{if(c&&I===s)return c;return c=Te(s,t),I=s,c},v={selected:!1,focused:!1},p=(s,g)=>{return v.selected=s,v.focused=g,v},b=`${n}-item ${n}-grid-item`,E=`${n}-item--selected`,W=`${n}-item--focused`,F=(s,g)=>{if(typeof g==="string")s.innerHTML=g;else s.replaceChildren(g)},G=(s,g,C)=>{s.classList.toggle(E,g),s.classList.toggle(W,C)},V=(s,g)=>{let C=a.getRow(s);if(g){let z=g.totalItems,k=S(z);if(k.isCompressed)return ut(C,g.scrollTop,t,z,g.containerHeight,k,g.rangeStart)}return t.getOffset(C)},j=(s,g,C)=>{let z=a.getCol(g),k=a.getColumnOffset(z,d),M=V(g,C);s.style.transform=`translate(${Math.round(k)}px, ${Math.round(M)}px)`},_=(s,g)=>{let C=a.getColumnWidth(d),z=a.getRow(g),k=t.getHeight(z)-a.gap;s.style.width=`${C}px`,s.style.height=`${k}px`},le=(s,g,C,z,k)=>{let M=u.acquire(),K=p(C,z);if(M.className=b,M.dataset.index=String(s),M.dataset.id=String(g.id),M.dataset.row=String(a.getRow(s)),M.dataset.col=String(a.getCol(s)),M.ariaSelected=String(C),o)M.id=`${o}-item-${s}`;if(l)h=String(l()),M.setAttribute("aria-setsize",h),M.setAttribute("aria-posinset",String(s+1));_(M,s);let U=r(g,s,K);return F(M,U),G(M,C,z),j(M,s,k),M},ae=(s,g,C,z,k)=>{for(let[m,D]of f)if(m<g.start||m>g.end)D.element.remove(),u.release(D.element),f.delete(m);let M=!1;if(l){let m=String(l());M=m!==h,h=m}let K=document.createDocumentFragment(),U=[];for(let m=g.start;m<=g.end;m++){let D=m-g.start,A=s[D];if(!A)continue;let $=C.has(A.id),Q=m===z,q=f.get(m);if(q){let Z=q.element.dataset.id,P=String(A.id);if(Z!==P){let w=p($,Q),L=r(A,m,w);F(q.element,L),q.element.dataset.id=P,q.element.dataset.row=String(a.getRow(m)),q.element.dataset.col=String(a.getCol(m)),_(q.element,m)}if(G(q.element,$,Q),q.element.ariaSelected=String($),j(q.element,m,k),M)q.element.setAttribute("aria-setsize",h)}else{let Z=le(m,A,$,Q,k);K.appendChild(Z),U.push({index:m,element:Z})}}if(U.length>0){e.appendChild(K);for(let{index:m,element:D}of U)f.set(m,{index:m,element:D})}},te=(s)=>{for(let[g,C]of f)j(C.element,g,s)},O=(s,g,C,z)=>{let k=f.get(s);if(k){let M=p(C,z),K=r(g,s,M);F(k.element,K),G(k.element,C,z),k.element.dataset.id=String(g.id),k.element.ariaSelected=String(C),_(k.element,s)}},re=(s,g,C)=>{let z=f.get(s);if(z)G(z.element,g,C)},x=(s)=>{return f.get(s)?.element},H=(s)=>{if(Math.abs(s-d)<1)return;d=s;for(let[g,C]of f)_(C.element,g),j(C.element,g)},T=()=>{for(let[,s]of f)s.element.remove(),u.release(s.element);f.clear()};return{render:ae,updatePositions:te,updateItem:O,updateItemClasses:re,getElement:x,updateContainerWidth:H,clear:T,destroy:()=>{T(),u.clear()}}},kr=0,mt=(e)=>{if(!e.container)throw Error("[vlist] Container is required");if(!e.item)throw Error("[vlist] item configuration is required");let r=e.direction==="horizontal",t=r?"width":"height",a=r?e.item.width:e.item.height;if(a==null)throw Error(`[vlist] item.${t} is required${r?" when direction is 'horizontal'":""}`);if(typeof a==="number"&&a<=0)throw Error(`[vlist] item.${t} must be a positive number`);if(typeof a!=="number"&&typeof a!=="function")throw Error(`[vlist] item.${t} must be a number or a function (index) => number`);if(!e.item.template)throw Error("[vlist] item.template is required");if(r){if(e.groups)throw Error("[vlist] horizontal direction cannot be combined with groups");if(e.layout==="grid")throw Error("[vlist] horizontal direction cannot be combined with grid layout");if(e.reverse)throw Error("[vlist] horizontal direction cannot be combined with reverse mode")}if(e.layout==="grid"){if(!e.grid)throw Error("[vlist] grid configuration is required when layout is 'grid'");if(!e.grid.columns||e.grid.columns<1)throw Error("[vlist] grid.columns must be a positive integer >= 1");if(e.groups)throw Error("[vlist] grid layout cannot be combined with groups")}if(e.reverse){if(e.groups)throw Error("[vlist] reverse mode cannot be combined with groups");if(e.layout==="grid")throw Error("[vlist] reverse mode cannot be combined with grid layout")}let{item:n,items:i,adapter:l,overscan:o=Kt,selection:u,scroll:f,scrollbar:d,loading:c,idleTimeout:I,classPrefix:h=qt,scrollElement:S,ariaLabel:v,groups:p,layout:b="list",grid:E,reverse:W=!1}=e,F=f?.wheel??!0,G=f?.wrap??!1,V=f?.element??S,j=f?.idleTimeout??I,_,le={};if(f?.scrollbar!==void 0)if(f.scrollbar==="native")_="native";else if(f.scrollbar==="none")_="none";else _="custom",le=f.scrollbar;else if(d!==void 0)if(d.enabled===!1)_="none";else _="custom",le=d;else _="custom";let ae=!!V,te=!!p,O=b==="grid"&&!!E,re=W,x=a,H=r?typeof n.height==="number"?n.height:void 0:typeof n.width==="number"?n.width:void 0,{template:T}=n,s=u?.mode??"none",g=c?.cancelThreshold??Nt,C=c?.preloadThreshold??jt,z=c?.preloadAhead??Ut,k=`${h}-${kr++}`,M=null,K=null;if(O&&E)M=Rr(E);let U=()=>{let y=J?.getTotal()??0;if(O&&M)return M.getTotalRows(y);return y},m=null,D=null,A=i?[...i]:[],$=i??[],Q=x,q=T;if(te&&p){m=Lr(A.length,p),$=ct(A,m.groups),Q=ft(m,x);let y=p.headerTemplate;q=(R,X,de)=>{if(Er(R))return y(R.groupKey,R.groupIndex);return T(R,X,de)}}let Z=_t(e.container),P=Bt(Z,h,v,r),w=Jt(),L=te?$?.length??0:i?.length??0,Y=O&&M?M.getTotalRows(L):L,ee=O&&M?M.gap:0;if(O&&ee>0)if(typeof Q==="number")Q=Q+ee;else{let y=Q;Q=(R)=>y(R)+ee}let N=kt(Q,Y),oe=null,ce=()=>{if(!m||!p)return;if(m.rebuild(A.length),$=ct(A,m.groups),Q=ft(m,x),D)D.refresh()},fe=te?$:i,J=pr({...l?{adapter:l}:{},...fe&&fe.length>0?{initialItems:fe}:{},...fe&&fe.length>0?{initialTotal:fe.length}:{},pageSize:ze,onStateChange:()=>{if(oe?.state.isInitialized)N.rebuild(U()),bt()},onItemsLoaded:(y,R,X)=>{if(oe?.state.isInitialized)N.rebuild(U()),je(),w.emit("load:end",{items:y,total:X})}});if(ae)P.root.style.overflow="visible",P.root.style.height="auto",P.viewport.style.overflow="visible",P.viewport.style.height="auto";let me=ae?{height:window.innerHeight,width:P.viewport.clientWidth}:Wt(P.viewport),ve=r?me.width:me.height,ne=(y)=>{if(r)Vt(P.content,y);else Ot(P.content,y)},ge=U(),ie=Te(ge,N),Ce=Yt(ve,N,ge,o,ie,Le),he=null,se=cr(P.viewport,{compressed:ie.isCompressed,...ie.isCompressed?{compression:ie}:{},...j!==void 0?{idleTimeout:j}:{},...ae?{scrollElement:V}:{},wheel:F,horizontal:r,onScroll:(y)=>{if(!P.root.classList.contains(`${h}--scrolling`))P.root.classList.add(`${h}--scrolling`);if(he)he(y.scrollTop,y.direction)},onIdle:()=>{if(P.root.classList.remove(`${h}--scrolling`),he?.loadPendingRange)he.loadPendingRange()}});if(te)P.root.classList.add(`${h}--grouped`);let ye;if(O&&M)P.root.classList.add(`${h}--grid`),K=zr(P.items,q,N,M,h,me.width,()=>J.getTotal(),k),ye=K;else ye=Ft(P.items,q,N,h,()=>J.getTotal(),k,r,r?H:void 0,{getState:Te,getPosition:ut});let ue=!ae&&_!=="none"&&(_==="custom"||_==="native"&&ie.isCompressed)?nt(P.viewport,(y)=>se.scrollTo(y),le,h,r):null;if(!ae&&(_!=="native"||ie.isCompressed||!F))P.viewport.classList.add(`${h}-viewport--custom-scrollbar`);if(ue)ue.updateBounds(ie.virtualHeight,ve);if(te&&p&&m&&p.sticky!==!1)D=Tr(P.root,m,N,p,h);let B=oe=vr({itemHeight:Q,overscan:o,classPrefix:h,selectionMode:s,hasAdapter:!!l,reverse:re,wrap:G,cancelLoadThreshold:g,preloadThreshold:C,preloadAhead:z,ariaIdPrefix:k},P,N,J,se,ye,w,ue,{viewportState:Ce,selectionState:er(u?.initial),lastRenderRange:{start:0,end:0},isInitialized:!1,isDestroyed:!1,cachedCompression:{state:ie,totalItems:J.getTotal()}},O?U:void 0,Le,Qt),Ct=()=>{let y=U(),R=Te(y,N);if(R.isCompressed&&!se.isCompressed()){if(se.enableCompression(R),!ae&&!ue&&_!=="none"){if(ue=nt(P.viewport,(X)=>se.scrollTo(X),le,h,r),!P.viewport.classList.contains(`${h}-viewport--custom-scrollbar`))P.viewport.classList.add(`${h}-viewport--custom-scrollbar`);B.scrollbar=ue}}else if(!R.isCompressed&&se.isCompressed())se.disableCompression();else if(R.isCompressed)se.updateConfig({compression:R});if(ae&&!R.isCompressed)se.updateConfig({compression:R});if(ue)ue.updateBounds(R.virtualHeight,B.state.viewportState.containerHeight)},bt=()=>{if(B.state.isDestroyed)return;Ct(),B.state.viewportState=Gt(B.state.viewportState,N,U(),o,B.getCachedCompression(),Le),ne(B.state.viewportState.totalHeight),be()},Ne=(y)=>{if(O&&M){let R=J.getTotal(),X=M.getItemRange(y.start,y.end,R);return{items:J.getItemsInRange(X.start,X.end),itemRange:X}}return{items:B.getItemsForRange(y),itemRange:y}},be=()=>{if(B.state.isDestroyed)return;let{renderRange:y,isCompressed:R}=B.state.viewportState,X=B.state.lastRenderRange;if(y.start===X.start&&y.end===X.end){if(R)ye.updatePositions(B.getCompressionContext());return}let{items:de,itemRange:Me}=Ne(y),we=R?B.getCompressionContext():void 0,Rt=O?Me:y;ye.render(de,Rt,B.state.selectionState.selected,B.state.selectionState.focusedIndex,we),B.state.lastRenderRange={...y},w.emit("range:change",{range:y})},je=()=>{if(B.state.isDestroyed)return;let{renderRange:y,isCompressed:R}=B.state.viewportState,{items:X,itemRange:de}=Ne(y),Me=R?B.getCompressionContext():void 0,we=O?de:y;ye.render(X,we,B.state.selectionState.selected,B.state.selectionState.focusedIndex,Me)},We=xr(B,be);if(he=We,D){let y=We,R=D,X=(de,Me)=>{y(de,Me),R.update(de)};X.loadPendingRange=We.loadPendingRange,he=X}let Ue=wr(B,je),Ie=Cr(B),Qe=yr(B,Ie.scrollToIndex),pe=Ir(B),Ht=te?{setItems:(y)=>{A=[...y],ce(),pe.setItems($)},appendItems:(y)=>{A=[...A,...y],ce(),pe.setItems($)},prependItems:(y)=>{A=[...y,...A],ce(),pe.setItems($)},updateItem:pe.updateItem,removeItem:(y)=>{A=A.filter((R)=>R.id!==y),ce(),pe.setItems($)},reload:pe.reload}:re?{...pe,appendItems:(y)=>{let R=se.isAtBottom(2);if(pe.appendItems(y),R){let X=J.getTotal();if(X>0)Ie.scrollToIndex(X-1,"end")}},prependItems:(y)=>{let R=se.getScrollTop(),X=N.getTotalHeight();pe.prependItems(y);let de=N.getTotalHeight()-X;if(de>0)se.scrollTo(R+de)}}:pe,Se=Hr(B),He=br(B),Je=te&&m?{getScrollSnapshot:()=>{let y=He.getScrollSnapshot(),R=m.layoutToDataIndex(y.index);return{...y,index:R>=0?R:y.index}},restoreScroll:(y)=>{let R=m.dataToLayoutIndex(y.index);He.restoreScroll({...y,index:R})}}:O&&M?{getScrollSnapshot:()=>{let y=He.getScrollSnapshot(),R=M.columns;return{...y,index:y.index*R}},restoreScroll:(y)=>{let R=M.columns,X=Math.floor(y.index/R);He.restoreScroll({...y,index:X})}}:He,Lt=(y,R)=>{return w.on(y,R)},Tt=(y,R)=>{w.off(y,R)},et=new ResizeObserver((y)=>{if(B.state.isDestroyed)return;if(ae)return;for(let R of y){let X=R.contentRect.height,de=R.contentRect.width,Me=B.state.viewportState.containerHeight,we=r?de:X;if(Math.abs(we-Me)>1){if(B.state.viewportState=rt(B.state.viewportState,we,N,U(),o,B.getCachedCompression(),Le),ne(B.state.viewportState.totalHeight),ue)ue.updateBounds(B.state.viewportState.totalHeight,we);se.updateContainerHeight(we),be(),w.emit("resize",{height:X,width:de})}if(O&&K)K.updateContainerWidth(de)}}),Ee=null;if(ae)Ee=()=>{if(B.state.isDestroyed)return;let y=window.innerHeight,R=B.state.viewportState.containerHeight;if(Math.abs(y-R)>1)se.updateContainerHeight(y),B.state.viewportState=rt(B.state.viewportState,y,N,U(),o,B.getCachedCompression(),Le),ne(B.state.viewportState.totalHeight),be(),w.emit("resize",{height:y,width:window.innerWidth})},window.addEventListener("resize",Ee);let xe=document.createElement("div");if(xe.setAttribute("aria-live","polite"),xe.setAttribute("aria-atomic","true"),xe.className=`${h}-live-region`,xe.style.cssText="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0",P.root.appendChild(xe),s!=="none")w.on("selection:change",({selected:y})=>{let R=y.length;if(R===0)xe.textContent="";else if(R===1)xe.textContent="1 item selected";else xe.textContent=`${R} items selected`});if(l)w.on("load:start",()=>{P.root.setAttribute("aria-busy","true")}),w.on("load:end",()=>{P.root.removeAttribute("aria-busy")});let Et=()=>{if(B.state.isDestroyed)return;if(B.state.isDestroyed=!0,P.items.removeEventListener("click",Ue),P.root.removeEventListener("keydown",Qe),xe.remove(),et.disconnect(),Ee)window.removeEventListener("resize",Ee);if(se.destroy(),ue)ue.destroy();if(D)D.destroy();if(K)K.destroy();else ye.destroy();w.clear(),P.root.remove()};if(P.items.addEventListener("click",Ue),P.root.addEventListener("keydown",Qe),et.observe(P.viewport),B.state.isInitialized=!0,ne(B.state.viewportState.totalHeight),be(),D)D.update(B.scrollController.getScrollTop());if(l&&(!i||i.length===0))w.emit("load:start",{offset:0,limit:ze}),J.loadInitial().catch((y)=>{w.emit("error",{error:y,context:"loadInitial"})});if(re){let y=J.getTotal();if(y>0)Ie.scrollToIndex(y-1,"end");else if(l){let R=w.on("load:end",()=>{R();let X=J.getTotal();if(X>0)Ie.scrollToIndex(X-1,"end")})}}return{get element(){return P.root},get items(){if(te)return A;return B.getAllLoadedItems()},get total(){if(te)return A.length;return J.getTotal()},...Ht,...te&&m?{...Ie,scrollToIndex:(y,R)=>{let X=m.dataToLayoutIndex(y);Ie.scrollToIndex(X,R)}}:Ie,getScrollSnapshot:Je.getScrollSnapshot,restoreScroll:Je.restoreScroll,select:Se.select,deselect:Se.deselect,toggleSelect:Se.toggleSelect,selectAll:Se.selectAll,clearSelection:Se.clearSelection,getSelected:Se.getSelected,getSelectedItems:Se.getSelectedItems,on:Lt,off:Tt,destroy:Et}};function pt(e,r){let t=mt({...r.config,container:e});if(r.onInstance)r.onInstance(t);return{update(a){if(a.config.items)t.setItems(a.config.items);if(a.onInstance)a.onInstance(t)},destroy(){t.destroy()}}}var Ze=new Map,vt=(e)=>{if(Ze.has(e.id))throw Error(`Suite "${e.id}" is already registered`);console.log(`[runner] Registering suite: ${e.id}`),Ze.set(e.id,e),console.log(`[runner] Suite registered. Total suites: ${Ze.size}`)};var Be=()=>new Promise((e)=>requestAnimationFrame(e)),Ke=async(e)=>{for(let r=0;r<e;r++)await Be()},Dr=(e)=>new Promise((r)=>setTimeout(r,e)),qe=async()=>{if(typeof globalThis.gc==="function")globalThis.gc();await Dr(100),await Ke(3)};var xt=(e)=>{if(e.length===0)return 0;let r=[...e].sort((a,n)=>a-n),t=Math.floor(r.length/2);return r.length%2!==0?r[t]:(r[t-1]+r[t])/2},wt=(e,r)=>{if(e.length===0)return 0;let t=r/100*(e.length-1),a=Math.floor(t),n=Math.ceil(t);if(a===n)return e[a];return e[a]+(e[n]-e[a])*(t-a)},Oe=(e,r=1)=>{let t=10**r;return Math.round(e*t)/t},yt=(e)=>{let r=Array(e);for(let t=0;t<e;t++)r[t]={id:t};return r},It=(e,r)=>`<div class="bench-item">${r}</div>`,Ve=(e,r,t)=>{if(e<=r)return"good";if(e<=t)return"ok";return"bad"};var Pr=48,Fr=2,St=7,Mt=async(e,r)=>{e.innerHTML="",await Be();let t=performance.now(),a=pt(e,{config:{item:{height:Pr,template:It},items:r}});await Be();let n=performance.now()-t;if(a&&a.destroy)a.destroy();return e.innerHTML="",n};console.log("[render/svelte] Defining suite with ID: render-svelte");vt({id:"render-svelte",name:"Initial Render (Svelte)",description:"Time from vlist() action to first painted frame",icon:"âš¡",run:async({itemCount:e,container:r,onStatus:t})=>{let a=yt(e);t("Warming up...");for(let c=0;c<Fr;c++)await Mt(r,a),await qe();t("Measuring...");let n=[];for(let c=0;c<St;c++){t(`Iteration ${c+1}/${St}`),await qe();let I=await Mt(r,a);n.push(I),await Ke(5)}let i=[...n].sort((c,I)=>c-I),l=Oe(xt(n),2),o=Oe(i[0],2),u=Oe(wt(i,95),2),f=e<=1e4?20:e<=1e5?30:80,d=e<=1e4?40:e<=1e5?60:200;return[{label:"Median",value:l,unit:"ms",better:"lower",rating:Ve(l,f,d)},{label:"Min",value:o,unit:"ms",better:"lower",rating:Ve(o,f,d)},{label:"p95",value:u,unit:"ms",better:"lower",rating:Ve(u,f*1.5,d*1.5)}]}});
