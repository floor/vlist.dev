var Rt=(e,r)=>{let t=r;return{getOffset:(a)=>a*e,getHeight:(a)=>e,indexAtOffset:(a)=>{if(t===0||e===0)return 0;return Math.max(0,Math.min(Math.floor(a/e),t-1))},getTotalHeight:()=>t*e,getTotal:()=>t,rebuild:(a)=>{t=a},isVariable:()=>!1}},At=(e,r)=>{let t=r,a=new Float64Array(0),l=(n)=>{t=n,a=new Float64Array(n+1),a[0]=0;for(let o=0;o<n;o++)a[o+1]=a[o]+e(o)};l(r);let i=(n)=>{if(t===0)return 0;if(n<=0)return 0;if(n>=a[t])return t-1;let o=0,u=t-1;while(o<u){let g=o+u+1>>>1;if(a[g]<=n)o=g;else u=g-1}return o};return{getOffset:(n)=>{if(n<=0)return 0;if(n>=t)return a[t];return a[n]},getHeight:(n)=>e(n),indexAtOffset:(n)=>i(n),getTotalHeight:()=>a[t]??0,getTotal:()=>t,rebuild:(n)=>l(n),isVariable:()=>!0}},kt=(e,r)=>{if(typeof e==="number")return Rt(e,r);return At(e,r)},zt=(e,r,t,a)=>{if(a===0)return 0;if(!e.isVariable())return Math.ceil(t/e.getHeight(0));let l=0,i=0,n=r;while(n<a&&i<t)i+=e.getHeight(n),l++,n++;return Math.max(1,l)},ft=(e,r,t)=>{if(t===0)return 0;if(!e.isVariable())return Math.floor(r/e.getHeight(0));let a=0,l=0;for(let i=t-1;i>=0;i--){let n=e.getHeight(i);if(l+n>r)break;l+=n,a++}return Math.max(a,1)},tt=(e,r,t)=>{if(t===0)return 0;let a=Math.floor(r),l=r-a,i=Math.max(0,Math.min(a,t-1));return e.getOffset(i)+l*e.getHeight(i)},Dt=(e="div",r=100)=>{let t=[],a=0,l=0;return{acquire:()=>{let i=t.pop();if(i)return l++,i;a++;let n=document.createElement(e);return n.setAttribute("role","option"),n},release:(i)=>{if(t.length<r)i.className="",i.textContent="",i.removeAttribute("style"),i.removeAttribute("data-index"),i.removeAttribute("data-id"),t.push(i)},clear:()=>{t.length=0},stats:()=>({poolSize:t.length,created:a,reused:l})}},Pt=(e,r,t,a,l,i,n,o,u)=>{let g=Dt("div"),d=new Map,c=null,S=0,h="",I=(s)=>{if(c&&S===s)return c;if(u)c=u.getState(s,t);else{let f=t.getTotalHeight();c={isCompressed:!1,actualHeight:f,virtualHeight:f,ratio:1}}return S=s,c},v={selected:!1,focused:!1},p=(s,f)=>{return v.selected=s,v.focused=f,v},b=(s,f)=>{if(typeof f==="string")s.innerHTML=f;else s.replaceChildren(f)},E=(s,f)=>{if(n){if(s.style.width=`${t.getHeight(f)}px`,o!=null)s.style.height=`${o}px`}else s.style.height=`${t.getHeight(f)}px`},_=(s,f)=>{if(f){let C=I(f.totalItems);if(C.isCompressed&&u)return u.getPosition(s,f.scrollTop,t,f.totalItems,f.containerHeight,C,f.rangeStart)}return t.getOffset(s)},F=(s,f,C)=>{let k=_(f,C);s.style.transform=n?`translateX(${Math.round(k)}px)`:`translateY(${Math.round(k)}px)`},G=`${a}-item`,W=`${a}-item--selected`,j=`${a}-item--focused`,V=(s)=>{s.className=G},ne=(s,f,C)=>{s.classList.toggle(W,f),s.classList.toggle(j,C)},ae=(s,f,C,k,z)=>{let M=g.acquire(),K=p(C,k);if(E(M,s),V(M),M.dataset.index=String(s),M.dataset.id=String(f.id),M.ariaSelected=String(C),i)M.id=`${i}-item-${s}`;if(l)h=String(l()),M.setAttribute("aria-setsize",h),M.setAttribute("aria-posinset",String(s+1));let U=r(f,s,K);return b(M,U),ne(M,C,k),F(M,s,z),M},te=(s,f,C,k,z)=>{for(let[m,D]of d)if(m<f.start||m>f.end)D.element.remove(),g.release(D.element),d.delete(m);let M=!1;if(l){let m=String(l());M=m!==h,h=m}let K=document.createDocumentFragment(),U=[];for(let m=f.start;m<=f.end;m++){let D=m-f.start,A=s[D];if(!A)continue;let $=C.has(A.id),Q=m===k,q=d.get(m);if(q){let Z=q.element.dataset.id,P=String(A.id);if(Z!==P){let w=p($,Q),L=r(A,m,w);b(q.element,L),q.element.dataset.id=P,E(q.element,m)}if(ne(q.element,$,Q),q.element.ariaSelected=String($),F(q.element,m,z),M)q.element.setAttribute("aria-setsize",h)}else{let Z=ae(m,A,$,Q,z);K.appendChild(Z),U.push({index:m,element:Z})}}if(U.length>0){e.appendChild(K);for(let{index:m,element:D}of U)d.set(m,{index:m,element:D})}},O=(s)=>{for(let[f,C]of d)F(C.element,f,s)},re=(s,f,C,k)=>{let z=d.get(s);if(z){let M=p(C,k),K=r(f,s,M);b(z.element,K),ne(z.element,C,k),z.element.dataset.id=String(f.id),z.element.ariaSelected=String(C)}},x=(s,f,C)=>{let k=d.get(s);if(k)ne(k.element,f,C)},H=(s)=>{return d.get(s)?.element},T=()=>{for(let[,s]of d)s.element.remove(),g.release(s.element);d.clear()};return{render:te,updatePositions:O,updateItem:re,updateItemClasses:x,getElement:H,clear:T,destroy:()=>{T(),g.clear()}}},Ft=(e,r,t,a)=>{let l=document.createElement("div");if(l.className=`${r}`,l.setAttribute("role","listbox"),l.setAttribute("tabindex","0"),t)l.setAttribute("aria-label",t);if(a)l.classList.add(`${r}--horizontal`),l.setAttribute("aria-orientation","horizontal");let i=document.createElement("div");if(i.className=`${r}-viewport`,i.style.height="100%",i.style.width="100%",a)i.style.overflowX="auto",i.style.overflowY="hidden";else i.style.overflow="auto";let n=document.createElement("div");if(n.className=`${r}-content`,n.style.position="relative",a)n.style.height="100%";else n.style.width="100%";let o=document.createElement("div");if(o.className=`${r}-items`,o.style.position="relative",a)o.style.height="100%";else o.style.width="100%";return n.appendChild(o),i.appendChild(n),l.appendChild(i),e.appendChild(l),{root:l,viewport:i,content:n,items:o}},Bt=(e,r)=>{e.style.height=`${r}px`},Ot=(e,r)=>{e.style.width=`${r}px`},Wt=(e)=>({width:e.clientWidth,height:e.clientHeight}),_t=(e)=>{if(typeof e==="string"){let r=document.querySelector(e);if(!r)throw Error(`[vlist] Container not found: ${e}`);return r}return e},ze=(e,r,t,a,l,i)=>{if(a===0||r===0)return i.start=0,i.end=-1,i;let n=t.indexAtOffset(e),o=t.indexAtOffset(e+r);if(o<a-1)o++;return i.start=Math.max(0,n),i.end=Math.min(a-1,Math.max(0,o)),i},De=(e,r,t,a)=>{if(t===0)return a.start=0,a.end=-1,a;return a.start=Math.max(0,e.start-r),a.end=Math.min(t-1,e.end+r),a},Vt=(e,r,t,a,l,i)=>{if(a===0)return 0;let n=Math.max(0,Math.min(e,a-1)),o=r.getOffset(n),u=r.getHeight(n),g=r.getTotalHeight(),d=Math.max(0,g-t),c;switch(i){case"center":c=o-t/2+u/2;break;case"end":c=o-t+u;break;case"start":default:c=o;break}return Math.max(0,Math.min(c,d))};var $t=(e,r,t,a,l,i=ze)=>{let n={start:0,end:0},o={start:0,end:0};return i(0,e,r,t,l,n),De(n,a,t,o),{scrollTop:0,containerHeight:e,totalHeight:l.virtualHeight,actualHeight:l.actualHeight,isCompressed:l.isCompressed,compressionRatio:l.ratio,visibleRange:n,renderRange:o}},Yt=(e,r,t,a,l,i,n=ze)=>{return n(r,e.containerHeight,t,a,i,e.visibleRange),De(e.visibleRange,l,a,e.renderRange),e.scrollTop=r,e},rt=(e,r,t,a,l,i,n=ze)=>{return n(e.scrollTop,r,t,a,i,e.visibleRange),De(e.visibleRange,l,a,e.renderRange),e.containerHeight=r,e.totalHeight=i.virtualHeight,e.actualHeight=i.actualHeight,e.isCompressed=i.isCompressed,e.compressionRatio=i.ratio,e},Xt=(e,r,t,a,l,i=ze)=>{return i(e.scrollTop,e.containerHeight,r,t,l,e.visibleRange),De(e.visibleRange,a,t,e.renderRange),e.totalHeight=l.virtualHeight,e.actualHeight=l.actualHeight,e.isCompressed=l.isCompressed,e.compressionRatio=l.ratio,e},Gt=(e,r,t,a,l="start",i,n=Vt)=>{return n(e,r,t,a,i,l)};var Zt=3,Kt="vlist",at=200,ke=50,qt=25,Nt=2,jt=50,it=16000000,Te=(e,r)=>{let t=r.getTotalHeight(),a=t>it,l=a?it:t,i=t>0?l/t:1;return{isCompressed:a,actualHeight:t,virtualHeight:l,ratio:i}},Le=(e,r,t,a,l,i)=>{if(a===0||r===0)return i.start=0,i.end=-1,i;if(!l.isCompressed){let S=t.indexAtOffset(e),h=t.indexAtOffset(e+r);if(h<a-1)h++;return i.start=Math.max(0,S),i.end=Math.min(a-1,Math.max(0,h)),i}let{virtualHeight:n}=l,o=e/n*a,u=Math.floor(o),g=zt(t,Math.max(0,u),r,a),d=Math.ceil(o)+g,c=n-r-e;if(c<=r&&c>=-1){let S=ft(t,r,a),h=Math.max(0,a-S),I=Math.max(0,Math.min(1,1-c/r));u=Math.floor(u+(h-u)*I),d=c<=1?a-1:Math.min(a-1,u+g)}return i.start=Math.max(0,u),i.end=Math.min(a-1,Math.max(0,d)),i};var ut=(e,r,t,a,l,i,n)=>{if(!i.isCompressed||a===0)return t.getOffset(e);let{virtualHeight:o}=i,u=o-l,g=u-r;if(g<=l&&g>=-1){if(r>=u-1){let b=t.getTotalHeight()-t.getOffset(e);return l-b}let c=ft(t,l,a),S=Math.max(0,a-c),h=r/o*a,I=Math.max(0,Math.min(1,1-g/l)),v=t.getOffset(e)-t.getOffset(S),p=t.getOffset(e)-tt(t,h,a);return p+(v-p)*I}let d=r/o*a;return t.getOffset(e)-tt(t,d,a)},Ut=(e,r,t,a,l,i="start")=>{if(a===0)return 0;let n;if(l.isCompressed){if(i==="end"&&e===a-1)return Math.max(0,l.virtualHeight-t);n=e/a*l.virtualHeight}else n=r.getOffset(e);let o=r.getHeight(e);switch(i){case"center":n-=(t-o)/2;break;case"end":n-=t-o;break}let u=l.virtualHeight-t;return Math.max(0,Math.min(n,u))};var Qt=()=>{let e={},r=(a,l)=>{if(!e[a])e[a]=new Set;return e[a].add(l),()=>t(a,l)},t=(a,l)=>{e[a]?.delete(l)};return{on:r,off:t,emit:(a,l)=>{e[a]?.forEach((i)=>{try{i(l)}catch(n){console.error(`[vlist] Error in event handler for "${String(a)}":`,n)}})},once:(a,l)=>{let i=(n)=>{t(a,i),l(n)};return r(a,i)},clear:(a)=>{if(a)delete e[a];else for(let l in e)delete e[l]},listenerCount:(a)=>{return e[a]?.size??0}}},Jt=(e)=>({selected:new Set(e??[]),focusedIndex:-1}),Xe=(e,r,t)=>{if(t==="none")return e;let a=new Set(e.selected);if(t==="single"){if(a.clear(),r.length>0)a.add(r[0])}else for(let l of r)a.add(l);return{...e,selected:a}},ht=(e,r)=>{let t=new Set(e.selected);for(let a of r)t.delete(a);return{...e,selected:t}},Ge=(e,r,t)=>{if(t==="none")return e;if(e.selected.has(r))return ht(e,[r]);else return Xe(e,[r],t)},er=(e,r,t)=>{if(t!=="multiple")return e;return{...e,selected:new Set(r.map((a)=>a.id))}},tr=(e)=>({...e,selected:new Set}),rr=(e,r)=>{return e.focusedIndex=r,e},ar=(e,r,t=!0)=>{if(r===0)return e;let a=e.focusedIndex-1;if(a<0)a=t?r-1:0;return e.focusedIndex=a,e},ir=(e,r,t=!0)=>{if(r===0)return e;let a=e.focusedIndex+1;if(a>=r)a=t?0:r-1;return e.focusedIndex=a,e},lr=(e,r)=>{if(r===0)return e;return e.focusedIndex=0,e},nr=(e,r)=>{if(r===0)return e;return e.focusedIndex=r-1,e},or=(e,r)=>{return e.selected.has(r)},Pe=(e)=>{return Array.from(e.selected)},Fe=(e,r)=>{let t=[];for(let a of e.selected){let l=r(a);if(l)t.push(l)}return t},lt=(e,r,t={},a="vlist",l=!1)=>{let{autoHide:i=!0,autoHideDelay:n=1000,minThumbSize:o=30,showOnHover:u=!0,hoverZoneWidth:g=16,showOnViewportEnter:d=!0}=t,c=0,S=0,h=0,I=0,v=!1,p=!1,b=0,E=0,_=0,F=null,G=!1,W=null,j=null,V=l?"width":"height",ne=l?"translateX":"translateY",ae=l?(Z)=>Z.clientX:(Z)=>Z.clientY,te=l?"left":"top",O=document.createElement("div"),re=document.createElement("div"),x=u?document.createElement("div"):null,H=()=>{if(O.className=`${a}-scrollbar`,re.className=`${a}-scrollbar-thumb`,l)O.classList.add(`${a}-scrollbar--horizontal`);if(O.appendChild(re),e.appendChild(O),x){if(x.className=`${a}-scrollbar-hover`,l)x.classList.add(`${a}-scrollbar-hover--horizontal`),x.style.height=`${g}px`;else x.style.width=`${g}px`;e.appendChild(x)}},T=()=>{if(F)clearTimeout(F),F=null},s=()=>{if(!i)return;T(),F=setTimeout(C,n)},f=()=>{if(c<=S)return;if(T(),!G)O.classList.add(`${a}-scrollbar--visible`),G=!0;if(i&&!v&&!p)s()},C=()=>{if(v||p)return;O.classList.remove(`${a}-scrollbar--visible`),G=!1},k=(Z,P)=>{c=Z,S=P;let w=c>S;if(O.style.display=w?"":"none",!w){C();return}let L=S/c;h=Math.max(o,L*S),re.style[V]=`${h}px`,I=S-h,z(_)},z=(Z)=>{if(_=Z,c<=S||I<=0)return;let P=c-S,w=Math.min(1,Math.max(0,Z/P))*I;re.style.transform=`${ne}(${w}px)`},M=(Z)=>{if(Z.target===re)return;let P=O.getBoundingClientRect(),w=ae(Z)-P[te]-h/2,L=Math.max(0,Math.min(w,I))/I,Y=c-S,ee=L*Y;r(ee),f()},K=(Z)=>{Z.preventDefault(),Z.stopPropagation(),v=!0,b=ae(Z),E=_,T(),O.classList.add(`${a}-scrollbar--dragging`),document.addEventListener("mousemove",U),document.addEventListener("mouseup",m)},U=(Z)=>{if(!v)return;let P=ae(Z)-b,w=I>0?P/I:0,L=c-S,Y=w*L,ee=Math.max(0,Math.min(E+Y,L)),N=ee/L*I;if(re.style.transform=`${ne}(${N}px)`,j=ee,W===null)W=requestAnimationFrame(()=>{if(j!==null)r(j);W=null})},m=()=>{if(v=!1,W!==null)cancelAnimationFrame(W),W=null;if(j!==null)r(j),j=null;if(O.classList.remove(`${a}-scrollbar--dragging`),i&&!p)s();document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",m)},D=()=>{if(d)f()},A=()=>{if(!v){if(p=!1,i)s()}},$=()=>{p=!0,T(),f()},Q=()=>{if(p=!1,!v&&i)s()},q=()=>{if(T(),W!==null)cancelAnimationFrame(W),W=null;if(O.removeEventListener("click",M),O.removeEventListener("mouseenter",$),O.removeEventListener("mouseleave",Q),re.removeEventListener("mousedown",K),e.removeEventListener("mouseenter",D),e.removeEventListener("mouseleave",A),document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",m),x){if(x.removeEventListener("mouseenter",$),x.removeEventListener("mouseleave",Q),x.parentNode)x.parentNode.removeChild(x)}if(O.parentNode)O.parentNode.removeChild(O)};if(H(),O.addEventListener("click",M),O.addEventListener("mouseenter",$),O.addEventListener("mouseleave",Q),re.addEventListener("mousedown",K),e.addEventListener("mouseenter",D),e.addEventListener("mouseleave",A),x)x.addEventListener("mouseenter",$),x.addEventListener("mouseleave",Q);return{show:f,hide:C,updateBounds:k,updatePosition:z,isVisible:()=>G,destroy:q}},nt=(e=0)=>{let r=[,,,,,,,,];for(let t=0;t<8;t++)r[t]={position:0,time:0};return{velocity:0,lastPosition:e,lastTime:performance.now(),samples:r,sampleIndex:0,sampleCount:0}},Re=(e,r)=>{let t=performance.now(),a=t-e.lastTime;if(a===0)return e;if(a>100){e.sampleCount=0,e.sampleIndex=0,e.velocity=0;let i=e.samples[0];return i.position=r,i.time=t,e.sampleIndex=1,e.sampleCount=1,e.lastPosition=r,e.lastTime=t,e}let l=e.samples[e.sampleIndex];if(l.position=r,l.time=t,e.sampleIndex=(e.sampleIndex+1)%8,e.sampleCount=Math.min(e.sampleCount+1,8),e.sampleCount>=2){let i=(e.sampleIndex-e.sampleCount+8)%8,n=e.samples[i],o=r-n.position,u=t-n.time;e.velocity=u>0?o/u:0}return e.lastPosition=r,e.lastTime=t,e},sr=(e)=>e.sampleCount>=3,dr=(e,r={})=>{let{wheel:t=!0,sensitivity:a=1,smoothing:l=!1,idleTimeout:i=150,onScroll:n,onIdle:o,scrollElement:u,horizontal:g=!1}=r,d=!!u,c=0,S=0,h=d?g?window.innerWidth:window.innerHeight:g?e.clientWidth:e.clientHeight,I=r.compressed??!1,v=r.compression,p=nt(),b=!1,E=null,_=ot(()=>{let m=g?e.scrollLeft:e.scrollTop,D=m>=c?"down":"up";if(p=Re(p,m),c=m,n)n({scrollTop:c,direction:D,velocity:p.velocity});V()}),F=ot(()=>{let m=e.getBoundingClientRect(),D=g?Math.max(0,-m.left):Math.max(0,-m.top),A=D>=c?"down":"up";if(p=Re(p,D),c=D,!b)b=!0;if(n)n({scrollTop:c,direction:A,velocity:p.velocity});V()}),G=(m)=>{m.preventDefault()},W=(m)=>{if(m.deltaX)return;m.preventDefault(),e.scrollLeft+=m.deltaY},j=(m)=>{if(!I)return;m.preventDefault();let D=(g?m.deltaX||m.deltaY:m.deltaY)*a,A=c+D;if(l)A=c+D*0.3;if(A=Math.max(0,Math.min(A,S)),A!==c){let $=A>=c?"down":"up";if(p=Re(p,A),c=A,!b)b=!0;if(n)n({scrollTop:c,direction:$,velocity:p.velocity});V()}},V=()=>{if(E)clearTimeout(E);E=setTimeout(()=>{if(b=!1,p=nt(c),o)o()},i)},ne=(m)=>{if(I)return;if(I=!0,v=m,S=m.virtualHeight-h,d)return;if(_.cancel(),e.removeEventListener("scroll",_),!t)e.removeEventListener("wheel",G);else if(g)e.removeEventListener("wheel",W);if(g)e.style.overflowX="hidden";else e.style.overflow="hidden";if(t)e.addEventListener("wheel",j,{passive:!1});let D=g?e.scrollLeft:e.scrollTop;if(D>0){let A=g?v?.actualHeight??e.scrollWidth:v?.actualHeight??e.scrollHeight;c=D/A*S}if(g)e.scrollLeft=0;else e.scrollTop=0},ae=()=>{if(!I)return;if(I=!1,d){v=void 0;return}if(e.removeEventListener("wheel",j),g)e.style.overflowX="auto";else e.style.overflow="auto";if(e.addEventListener("scroll",_,{passive:!0}),!t)e.addEventListener("wheel",G,{passive:!1});else if(g)e.addEventListener("wheel",W,{passive:!1});if(v&&c>0){let m=c/S*(v.actualHeight-h);if(g)e.scrollLeft=m;else e.scrollTop=m}v=void 0},te=()=>{if(d||I)return c;return g?e.scrollLeft:e.scrollTop},O=(m,D=!1)=>{let A=Math.max(0,Math.min(m,S||1/0));if(d){let $=e.getBoundingClientRect();if(g){let Q=$.left+window.scrollX;window.scrollTo({left:Q+A,behavior:D?"smooth":"auto"})}else{let Q=$.top+window.scrollY;window.scrollTo({top:Q+A,behavior:D?"smooth":"auto"})}}else if(I){if(A===c)return;let $=A>=c?"down":"up";if(p=Re(p,A),c=A,!b)b=!0;if(n)n({scrollTop:c,direction:$,velocity:p.velocity});V()}else if(g)e.scrollTo({left:A,behavior:D?"smooth":"auto"});else e.scrollTo({top:A,behavior:D?"smooth":"auto"})},re=(m)=>{O(te()+m)},x=()=>{return te()<=0},H=(m=0)=>{let D=te(),A=d||I?S:g?e.scrollWidth-e.clientWidth:e.scrollHeight-e.clientHeight;return D>=A-m},T=()=>{let m=te(),D=d||I?S:g?e.scrollWidth-e.clientWidth:e.scrollHeight-e.clientHeight;if(D<=0)return 0;return Math.min(1,Math.max(0,m/D))},s=(m)=>{if(m.compression)v=m.compression,S=v.virtualHeight-h},f=()=>I,C=()=>Math.abs(p.velocity),k=()=>sr(p),z=()=>b,M=()=>d,K=(m)=>{if(h=m,v)S=v.virtualHeight-h},U=()=>{if(E)clearTimeout(E);if(d)F.cancel(),window.removeEventListener("scroll",F);else _.cancel(),e.removeEventListener("scroll",_),e.removeEventListener("wheel",j),e.removeEventListener("wheel",G),e.removeEventListener("wheel",W)};if(d){if(I&&v)S=v.virtualHeight-h;window.addEventListener("scroll",F,{passive:!0})}else if(I&&v){if(S=v.virtualHeight-h,g)e.style.overflowX="hidden";else e.style.overflow="hidden";if(t)e.addEventListener("wheel",j,{passive:!1})}else{if(g)e.style.overflowX="auto",e.style.overflowY="hidden";else e.style.overflow="auto";if(e.addEventListener("scroll",_,{passive:!0}),!t)e.addEventListener("wheel",G,{passive:!1});else if(g)e.addEventListener("wheel",W,{passive:!1})}return{getScrollTop:te,scrollTo:O,scrollBy:re,isAtTop:x,isAtBottom:H,getScrollPercentage:T,getVelocity:C,isTracking:k,isScrolling:z,updateConfig:s,enableCompression:ne,disableCompression:ae,isCompressed:f,isWindowMode:M,updateContainerHeight:K,destroy:U}},ot=(e)=>{let r=null,t=null,a=(...l)=>{if(t=l,r===null)r=requestAnimationFrame(()=>{if(r=null,t)e(...t)})};return a.cancel=()=>{if(r!==null)cancelAnimationFrame(r),r=null},a},cr=(e={})=>{let{chunkSize:r=100,maxCachedItems:t=5000,evictionBuffer:a=200,onEvict:l}=e,i=new Map,n=0,o=0,u=(x)=>{let H=i.get(x);if(!H)H={items:Array(r),count:0,lastAccess:Date.now()},i.set(x,H);else H.lastAccess=Date.now();return H},g=(x)=>{return Math.floor(x/r)},d=(x)=>{return x%r},c=()=>n,S=(x)=>{n=x},h=(x)=>{if(x<0||x>=n)return;let H=g(x),T=i.get(H);if(!T)return;return T.items[d(x)]},I=(x)=>{if(x<0||x>=n)return!1;let H=g(x),T=i.get(H);if(!T)return!1;return T.items[d(x)]!==void 0},v=(x,H)=>{let T=g(x),s=u(T),f=d(x),C=s.items[f]===void 0;if(s.items[f]=H,C)s.count++,o++;if(x>=n)n=x+1},p=(x,H)=>{for(let T=0;T<H.length;T++){let s=H[T];if(s!==void 0)v(x+T,s)}},b=(x)=>{if(x<0||x>=n)return!1;let H=g(x),T=i.get(H);if(!T)return!1;let s=d(x);if(T.items[s]===void 0)return!1;if(T.items[s]=void 0,T.count--,o--,T.count===0)i.delete(H);return!0},E=(x,H)=>{let T=[];for(let s=x;s<=H&&s<n;s++)T.push(h(s));return T},_=(x,H)=>{for(let T=x;T<=H&&T<n;T++)if(!I(T))return!1;return!0},F=()=>{let x=[],H=null,T=Array.from(i.keys()).sort((s,f)=>s-f);for(let s of T){let f=i.get(s);if(!f)continue;let C=s*r;for(let k=0;k<r;k++){let z=C+k;if(z>=n)break;if(f.items[k]!==void 0)if(H===null)H={start:z,end:z};else if(z===H.end+1)H.end=z;else x.push(H),H={start:z,end:z};else if(H!==null)x.push(H),H=null}}if(H!==null)x.push(H);return x},G=(x,H)=>{let T=[],s=null;for(let f=x;f<=H&&f<n;f++)if(!I(f))if(s===null)s={start:f,end:f};else s.end=f;else if(s!==null)T.push(s),s=null;if(s!==null)T.push(s);return T},W=(x)=>{return i.has(x)},j=(x)=>{let H=i.get(x);if(H)H.lastAccess=Date.now()},V=(x,H)=>{if(x>H||i.size===0)return;let T=Date.now(),s=g(Math.max(0,x)),f=g(Math.min(n-1,H));for(let C=s;C<=f;C++){let k=i.get(C);if(k)k.lastAccess=T}},ne=(x,H)=>{if(o<=t)return 0;let T=Math.max(0,x-a),s=Math.min(n-1,H+a),f=g(T),C=g(s),k=0,z=[];for(let[M,K]of i)if(M<f||M>C)k+=K.count,z.push(M),o-=K.count,i.delete(M);if(k>0&&l)l(k,z);return k},ae=()=>{if(o<=t)return 0;let x=Array.from(i.entries()).sort(([,s],[,f])=>s.lastAccess-f.lastAccess),H=0,T=[];for(let[s,f]of x){if(o<=t)break;H+=f.count,o-=f.count,T.push(s),i.delete(s)}if(H>0&&l)l(H,T);return H},te=()=>{return{totalItems:n,cachedItems:o,cachedChunks:i.size,chunkSize:r,maxCachedItems:t,memoryEfficiency:n>0?1-o/n:1}},O=()=>o,re=()=>{i.clear(),o=0};return{chunkSize:r,maxCachedItems:t,getTotal:c,setTotal:S,get:h,has:I,set:v,setRange:p,delete:b,getRange:E,isRangeLoaded:_,getLoadedRanges:F,findUnloadedRanges:G,getChunkIndex:g,isChunkLoaded:W,touchChunk:j,touchChunksForRange:V,evictDistant:ne,evictToLimit:ae,getStats:te,getCachedCount:O,clear:re,reset:()=>{re(),n=0}}},gr=(e)=>{if(e.length===0)return[];let r=[...e].sort((a,l)=>a.start-l.start),t=[{...r[0]}];for(let a=1;a<r.length;a++){let l=r[a],i=t[t.length-1];if(l.start<=i.end+1)i.end=Math.max(i.end,l.end);else t.push({...l})}return t},fr=(e,r,t)=>{let a=Math.floor(e.start/t)*t,l=Math.ceil((e.end+1)/t)*t-1,i={start:a,end:l};if(r.length===0)return[i];let n=[],o=gr(r),u=i.start;for(let g of o){if(g.end<u)continue;if(g.start>i.end)break;if(g.start>u)n.push({start:u,end:Math.min(g.start-1,i.end)});if(u=g.end+1,u>i.end)break}if(u<=i.end)n.push({start:u,end:i.end});return n},ur=(e={})=>{let{enabled:r=!0,maskCharacter:t="â–ˆ",randomVariance:a=!0,maxSampleSize:l=20,customGenerator:i}=e,n=null,o=!1,u=0,g=(h)=>{if(!r||o||h.length===0)return;let I=new Map,v=new Map,p=Math.min(h.length,l);for(let b=0;b<p;b++){let E=h[b];if(!E||typeof E!=="object")continue;for(let[_,F]of Object.entries(E)){if(_.startsWith("_")||_==="id")continue;if(!v.has(_))v.set(_,{lengths:[],types:new Set});let G=v.get(_),W=Array.isArray(F)?"array":typeof F;if(G.types.add(W),typeof F==="string")G.lengths.push(F.length);else if(F!==null&&F!==void 0)G.lengths.push(String(F).length)}}for(let[b,E]of v){if(E.lengths.length===0)continue;let _=Math.min(...E.lengths),F=Math.max(...E.lengths),G=Math.round(E.lengths.reduce((j,V)=>j+V,0)/E.lengths.length),W="string";if(E.types.has("number")&&E.types.size===1)W="number";else if(E.types.has("boolean")&&E.types.size===1)W="boolean";else if(E.types.has("array"))W="array";else if(E.types.has("object")&&!E.types.has("string"))W="object";I.set(b,{minLength:_,maxLength:F,avgLength:G,type:W})}n=I,o=!0},d=()=>o,c=(h)=>{let I=h.avgLength;if(a&&h.minLength!==h.maxLength){if(I=Math.floor(Math.random()*(h.maxLength-h.minLength+1)+h.minLength),Math.random()<0.3)I=Math.max(1,I+Math.floor(Math.random()*3)-1)}return t.repeat(Math.max(1,I))},S=(h)=>{if(i)return{...i(h),["_isPlaceholder"]:!0};let I={id:`__placeholder_${u++}`,["_isPlaceholder"]:!0,_index:h};if(!n||n.size===0)return I.label=t.repeat(12),I;for(let[v,p]of n)switch(p.type){case"string":I[v]=c(p);break;case"number":I[v]=0;break;case"boolean":I[v]=!1;break;case"array":I[v]=[];break;case"object":I[v]={};break;default:I[v]=c(p)}return I};return{analyzeStructure:g,hasAnalyzedStructure:d,generate:S,generateRange:(h,I)=>{let v=[];for(let p=h;p<=I;p++)v.push(S(p));return v},isPlaceholder:(h)=>{if(!h||typeof h!=="object")return!1;return h._isPlaceholder===!0},getPlaceholderKey:()=>"_isPlaceholder",clear:()=>{n=null,o=!1,u=0}}},Ve=(e)=>{if(!e||typeof e!=="object")return!1;return e._isPlaceholder===!0};var hr=50,mr=(e={})=>{let{adapter:r,initialItems:t,initialTotal:a,storage:l,placeholder:i,pageSize:n=hr,onStateChange:o,onItemsLoaded:u,onItemsEvicted:g}=e,d=cr({...l,onEvict:(w,L)=>{g?.(w),F()}}),c=null,S=()=>{if(!c)c=ur(i);return c},h=new Map,I=!1,v,p=!0,b,E=[],_=new Map,F=()=>{o?.(re())},G=()=>{h.clear();let w=d.getLoadedRanges();for(let L of w)for(let Y=L.start;Y<=L.end;Y++){let ee=d.get(Y);if(ee&&!Ve(ee))h.set(ee.id,Y)}},W=(w,L)=>{if(!Ve(L))h.set(L.id,w)},j=(w)=>{h.delete(w)},V=(w,L)=>{return`${w}-${L}`},ne=()=>d.getTotal(),ae=()=>d.getCachedCount(),te=()=>I,O=()=>p,re=()=>({total:d.getTotal(),cached:d.getCachedCount(),isLoading:I,pendingRanges:E,error:v,hasMore:p,cursor:b}),x=()=>d,H=()=>S(),T=(w)=>{let L=d.get(w);if(L!==void 0)return L;if(w>=0&&w<d.getTotal())return S().generate(w);return},s=(w)=>{let L=h.get(w);if(L===void 0)return;return d.get(L)},f=(w)=>{return h.get(w)??-1},C=(w)=>{let L=d.get(w);return L!==void 0&&!Ve(L)},k=(w,L)=>{let Y=[],ee=d.getTotal(),N=0,oe=0;d.touchChunksForRange(w,Math.min(L,ee-1));for(let ce=w;ce<=L&&ce<ee;ce++){let ge=d.get(ce);if(ge!==void 0)Y.push(ge),N++;else Y.push(S().generate(ce)),oe++}return Y},z=(w)=>{d.setTotal(w),p=d.getCachedCount()<w,F()},M=(w,L=0,Y)=>{if(c&&!c.hasAnalyzedStructure()&&w.length>0)c.analyzeStructure(w);for(let ee=0;ee<w.length;ee++){let N=w[ee];if(N!==void 0){let oe=L+ee;d.set(oe,N),W(oe,N)}}if(Y!==void 0)d.setTotal(Y);else if(L+w.length>d.getTotal())d.setTotal(L+w.length);p=d.getCachedCount()<d.getTotal(),u?.(w,L,d.getTotal()),F()},K=(w,L)=>{let Y=h.get(w);if(Y===void 0)return!1;let ee=d.get(Y);if(!ee)return!1;let N={...ee,...L};if(d.set(Y,N),L.id!==void 0&&L.id!==w)j(w),W(Y,N);return F(),!0},U=(w)=>{let L=h.get(w);if(L===void 0)return!1;d.delete(L),j(w);let Y=d.getTotal();if(Y>0)d.setTotal(Y-1);return F(),!0},m=async(w,L)=>{if(!r)return;let Y=V(w,L);if(_.has(Y))return;let ee=d.getLoadedRanges(),N=fr({start:w,end:L},ee,d.chunkSize);if(N.length===0)return;let oe=d.chunkSize,ce=[];for(let J of N){let me=Math.floor(J.start/oe),ve=Math.floor(J.end/oe);for(let le=me;le<=ve;le++){let fe=le*oe,ie=fe+oe-1,Ce=V(fe,ie);if(!ce.some((he)=>he.start===fe)&&!_.has(Ce))ce.push({start:fe,end:ie})}}let ge=[];for(let J of N){let me=Math.floor(J.start/oe),ve=Math.floor(J.end/oe);for(let le=me;le<=ve;le++){let fe=le*oe,ie=fe+oe-1,Ce=V(fe,ie);if(_.has(Ce)){let he=_.get(Ce);if(!ge.includes(he))ge.push(he)}}}for(let J of ce){let me=V(J.start,J.end),ve=(async()=>{E.push(J),I=!0,v=void 0,F();try{let le=J.end-J.start+1,fe={offset:J.start,limit:le,cursor:void 0},ie=await r.read(fe);if(M(ie.items,J.start,ie.total),ie.cursor)b=ie.cursor;if(ie.hasMore!==void 0)p=ie.hasMore;else if(ie.total!==void 0)p=d.getCachedCount()<ie.total}catch(le){v=le instanceof Error?le:Error(String(le))}finally{_.delete(me),E=E.filter((le)=>le.start!==J.start||le.end!==J.end),I=_.size>0,F()}})();_.set(me,ve),ge.push(ve)}await Promise.all(ge)},D=async(w,L)=>{if(d.isRangeLoaded(w,L))return;await m(w,L)},A=async()=>{if(!r)return;await m(0,n-1)},$=async()=>{if(!r||I||!p)return!1;let w=d.getCachedCount(),L=d.getTotal(),Y=w,ee=Math.min(Y+n-1,L>0?L-1:Y+n-1);if(Y>=L&&L>0)return p=!1,!1;return await m(Y,ee),d.getCachedCount()>w},Q=async()=>{if(d.clear(),h.clear(),c)c.clear();b=void 0,p=!0,v=void 0,F(),await A()},q=(w,L)=>{if(d.evictDistant(w,L)>0)G()},Z=()=>{d.clear(),h.clear(),b=void 0,v=void 0,E=[],I=!1,F()},P=()=>{if(d.reset(),h.clear(),c)c.clear();b=void 0,p=!0,v=void 0,E=[],I=!1,F()};if(t&&t.length>0)M(t,0,a??t.length);else if(a!==void 0)d.setTotal(a);return{getState:re,getTotal:ne,getCached:ae,getIsLoading:te,getHasMore:O,getStorage:x,getPlaceholders:H,getItem:T,getItemById:s,getIndexById:f,isItemLoaded:C,getItemsInRange:k,setTotal:z,setItems:M,updateItem:K,removeItem:U,loadRange:m,ensureRange:D,loadInitial:A,loadMore:$,reload:Q,evictDistant:q,clear:Z,reset:P}},pr=(e,r,t,a,l,i,n,o,u,g,d,c)=>{let S=u,h={scrollTop:0,totalItems:0,containerHeight:0,rangeStart:0},I=(b)=>{return a.getItemsInRange(b.start,b.end)},v=()=>{let b=a.getTotal();return a.getItemsInRange(0,b-1)},p=g??(()=>a.getTotal());return{config:e,dom:r,heightCache:t,dataManager:a,scrollController:l,renderer:i,emitter:n,scrollbar:o,state:S,getItemsForRange:I,getAllLoadedItems:v,getCompressionContext:()=>{return h.scrollTop=S.viewportState.scrollTop,h.totalItems=p(),h.containerHeight=S.viewportState.containerHeight,h.rangeStart=S.viewportState.renderRange.start,h},getCachedCompression:()=>{let b=p();if(S.cachedCompression&&S.cachedCompression.totalItems===b)return S.cachedCompression.state;let E=Te(b,t);return S.cachedCompression={state:E,totalItems:b},E},getVirtualTotal:p,visibleRangeFn:d,scrollToIndexFn:c}},vr=(e,r)=>{let t=null,a=null,l=0,i=()=>{if(a&&e.config.hasAdapter){let o=a;a=null,e.dataManager.ensureRange(o.start,o.end).catch((u)=>{e.emitter.emit("error",{error:u,context:"ensureRange"})})}},n=(o,u)=>{if(e.state.isDestroyed)return;let g=e.scrollController.getVelocity(),d=e.scrollController.isTracking(),{cancelLoadThreshold:c,preloadThreshold:S,preloadAhead:h}=e.config,I=d&&g<=c;if(a&&l>c&&g<=c){let b=a;a=null,e.dataManager.ensureRange(b.start,b.end).catch((E)=>{e.emitter.emit("error",{error:E,context:"ensureRange"})})}l=g;let v=e.getVirtualTotal();if(e.state.viewportState=Yt(e.state.viewportState,o,e.heightCache,v,e.config.overscan,e.getCachedCompression(),e.visibleRangeFn),e.scrollbar)e.scrollbar.updatePosition(o),e.scrollbar.show();if(r(),e.emitter.emit("scroll",{scrollTop:o,direction:u}),I&&e.config.hasAdapter&&!e.dataManager.getIsLoading()&&e.dataManager.getHasMore()){if(e.config.reverse){if(o<at)e.emitter.emit("load:start",{offset:e.dataManager.getCached(),limit:ke}),e.dataManager.loadMore().catch((b)=>{e.emitter.emit("error",{error:b,context:"loadMore"})})}else if(e.state.viewportState.totalHeight-o-e.state.viewportState.containerHeight<at)e.emitter.emit("load:start",{offset:e.dataManager.getCached(),limit:ke}),e.dataManager.loadMore().catch((b)=>{e.emitter.emit("error",{error:b,context:"loadMore"})})}let{renderRange:p}=e.state.viewportState;if(!t||p.start!==t.start||p.end!==t.end)if(t={start:p.start,end:p.end},I){a=null;let{start:b,end:E}=p;if(g>S)if(u==="down")E=Math.min(p.end+h,v-1);else b=Math.max(p.start-h,0);e.dataManager.ensureRange(b,E).catch((_)=>{e.emitter.emit("error",{error:_,context:"ensureRange"})})}else a={start:p.start,end:p.end}};return n.loadPendingRange=i,n},xr=(e,r)=>{return(t)=>{if(e.state.isDestroyed)return;let a=t.target.closest("[data-index]");if(!a)return;let l=parseInt(a.dataset.index??"-1",10);if(l<0)return;let i=e.dataManager.getItem(l);if(!i)return;if(e.emitter.emit("item:click",{item:i,index:l,event:t}),e.config.selectionMode!=="none"){e.state.selectionState=rr(e.state.selectionState,l),e.dom.root.setAttribute("aria-activedescendant",`${e.config.ariaIdPrefix}-item-${l}`),e.state.selectionState=Ge(e.state.selectionState,i.id,e.config.selectionMode);let n=e.getItemsForRange(e.state.viewportState.renderRange),o=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(n,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,o),e.emitter.emit("selection:change",{selected:Pe(e.state.selectionState),items:Fe(e.state.selectionState,(u)=>e.dataManager.getItemById(u))})}}},wr=(e,r)=>{return(t)=>{if(e.state.isDestroyed||e.config.selectionMode==="none")return;let a=e.dataManager.getTotal(),l=e.state.selectionState.focusedIndex,i=!1,n=!1,o=e.state.selectionState;switch(t.key){case"ArrowUp":o=ar(e.state.selectionState,a),i=!0,n=!0;break;case"ArrowDown":o=ir(e.state.selectionState,a),i=!0,n=!0;break;case"Home":o=lr(e.state.selectionState,a),i=!0,n=!0;break;case"End":o=nr(e.state.selectionState,a),i=!0,n=!0;break;case" ":case"Enter":if(e.state.selectionState.focusedIndex>=0){let u=e.dataManager.getItem(e.state.selectionState.focusedIndex);if(u)o=Ge(e.state.selectionState,u.id,e.config.selectionMode);i=!0}break}if(i){t.preventDefault(),e.state.selectionState=o;let u=e.state.selectionState.focusedIndex;if(u>=0)r(u,"center"),e.dom.root.setAttribute("aria-activedescendant",`${e.config.ariaIdPrefix}-item-${u}`);else e.dom.root.removeAttribute("aria-activedescendant");if(n){let{selected:g}=e.state.selectionState;if(l>=0&&l!==u){let d=e.dataManager.getItem(l);if(d)e.renderer.updateItemClasses(l,g.has(d.id),!1)}if(u>=0){let d=e.dataManager.getItem(u);if(d)e.renderer.updateItemClasses(u,g.has(d.id),!0)}}else{let g=e.getItemsForRange(e.state.viewportState.renderRange),d=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(g,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,d)}if(t.key===" "||t.key==="Enter")e.emitter.emit("selection:change",{selected:Pe(e.state.selectionState),items:Fe(e.state.selectionState,(g)=>e.dataManager.getItemById(g))})}}},yr=(e)=>({setItems:(r)=>{e.dataManager.setItems(r,0,r.length)},appendItems:(r)=>{let t=e.dataManager.getState().total;e.dataManager.setItems(r,t)},prependItems:(r)=>{let t=e.dataManager.getState().total,a=t>0?e.dataManager.getItemsInRange(0,t-1):[];e.dataManager.clear(),e.dataManager.setItems([...r,...a],0)},updateItem:(r,t)=>{if(e.dataManager.updateItem(r,t)){let a=e.dataManager.getIndexById(r),l=e.dataManager.getItem(a);if(l&&a>=e.state.viewportState.renderRange.start&&a<=e.state.viewportState.renderRange.end)e.renderer.updateItem(a,l,or(e.state.selectionState,r),e.state.selectionState.focusedIndex===a)}},removeItem:(r)=>{e.dataManager.removeItem(r)},reload:async()=>{if(e.config.hasAdapter)await e.dataManager.reload()}}),$e=300,Sr=(e)=>{if(typeof e==="string")return{align:e,behavior:"auto",duration:$e};if(e&&typeof e==="object")return{align:e.align??"start",behavior:e.behavior??"auto",duration:e.duration??$e};return{align:"start",behavior:"auto",duration:$e}},Ir=(e)=>e<0.5?2*e*e:-1+(4-2*e)*e,Mr=(e)=>{let r=null,t=()=>{if(r!==null)cancelAnimationFrame(r),r=null},a=(i,n,o)=>{if(t(),Math.abs(n-i)<1){e.scrollController.scrollTo(n);return}let u=performance.now(),g=(d)=>{let c=d-u,S=Math.min(c/o,1),h=Ir(S),I=i+(n-i)*h;if(e.scrollController.scrollTo(I),S<1)r=requestAnimationFrame(g);else r=null};r=requestAnimationFrame(g)},l=(i,n)=>{let{align:o,behavior:u,duration:g}=Sr(n),d=e.dataManager.getState();if(e.config.wrap&&d.total>0)i=(i%d.total+d.total)%d.total;let c=Gt(i,e.heightCache,e.state.viewportState.containerHeight,d.total,o,e.getCachedCompression(),e.scrollToIndexFn);if(u==="smooth"){let S=e.scrollController.getScrollTop();a(S,c,g)}else t(),e.scrollController.scrollTo(c)};return{scrollToIndex:l,scrollToItem:(i,n)=>{let o=e.dataManager.getIndexById(i);if(o>=0)l(o,n)},cancelScroll:t,getScrollPosition:()=>{return e.scrollController.getScrollTop()}}},Cr=(e)=>({getScrollSnapshot:()=>{let r=e.scrollController.getScrollTop(),t=e.getCachedCompression(),a=e.getVirtualTotal(),l=e.state.selectionState.selected.size>0?Array.from(e.state.selectionState.selected):void 0;if(a===0){let u={index:0,offsetInItem:0};if(l)u.selectedIds=l;return u}let i,n;if(t.isCompressed){let u=r/t.virtualHeight*a;i=Math.max(0,Math.min(Math.floor(u),a-1)),n=(u-i)*e.heightCache.getHeight(i)}else i=e.heightCache.indexAtOffset(r),n=r-e.heightCache.getOffset(i);n=Math.max(0,n);let o={index:i,offsetInItem:n};if(l)o.selectedIds=l;return o},restoreScroll:(r)=>{let{index:t,offsetInItem:a,selectedIds:l}=r,i=e.getCachedCompression(),n=e.getVirtualTotal();if(n===0)return;let o=Math.max(0,Math.min(t,n-1)),u;if(i.isCompressed){let d=e.heightCache.getHeight(o),c=d>0?a/d:0;u=(o+c)/n*i.virtualHeight}else u=e.heightCache.getOffset(o)+a;let g=Math.max(0,i.virtualHeight-e.state.viewportState.containerHeight);if(u=Math.max(0,Math.min(u,g)),e.scrollController.scrollTo(u),l&&l.length>0&&e.config.selectionMode!=="none")e.state.selectionState=Xe(e.state.selectionState,l,e.config.selectionMode)}}),Ae=(e)=>{let r=e.getItemsForRange(e.state.viewportState.renderRange),t=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(r,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,t),e.emitter.emit("selection:change",{selected:Pe(e.state.selectionState),items:Fe(e.state.selectionState,(a)=>e.dataManager.getItemById(a))})},br=(e)=>({select:(...r)=>{if(e.config.selectionMode==="none")return;e.state.selectionState=Xe(e.state.selectionState,r,e.config.selectionMode),Ae(e)},deselect:(...r)=>{e.state.selectionState=ht(e.state.selectionState,r),Ae(e)},toggleSelect:(r)=>{if(e.config.selectionMode==="none")return;e.state.selectionState=Ge(e.state.selectionState,r,e.config.selectionMode),Ae(e)},selectAll:()=>{if(e.config.selectionMode!=="multiple")return;let r=e.getAllLoadedItems();e.state.selectionState=er(e.state.selectionState,r,e.config.selectionMode),Ae(e)},clearSelection:()=>{e.state.selectionState=tr(e.state.selectionState);let r=e.getItemsForRange(e.state.viewportState.renderRange),t=e.state.viewportState.isCompressed?e.getCompressionContext():void 0;e.renderer.render(r,e.state.viewportState.renderRange,e.state.selectionState.selected,e.state.selectionState.focusedIndex,t),e.emitter.emit("selection:change",{selected:[],items:[]})},getSelected:()=>{return Pe(e.state.selectionState)},getSelectedItems:()=>{return Fe(e.state.selectionState,(r)=>e.dataManager.getItemById(r))}}),Ye=(e,r)=>{let t=0,a=e.length-1;while(t<a){let l=t+a+1>>>1;if(e[l].headerLayoutIndex<=r)t=l;else a=l-1}return t},st=(e,r)=>{let t=0,a=e.length-1;while(t<a){let l=t+a+1>>>1;if(e[l].firstDataIndex<=r)t=l;else a=l-1}return t},dt=(e,r)=>{if(e===0)return[];let t=[],a=r(0),l=0,i=0;for(let n=1;n<e;n++){let o=r(n);if(o!==a){let u=n-l;t.push({key:a,groupIndex:t.length,headerLayoutIndex:i,firstDataIndex:l,count:u}),i=i+1+u,a=o,l=n}}return t.push({key:a,groupIndex:t.length,headerLayoutIndex:i,firstDataIndex:l,count:e-l}),t},ct=(e,r)=>{if(e.length===0||r.length===0)return[];let t=e.length+r.length,a=Array(t),l=0;for(let i of r){a[l]={id:`__group_header_${i.groupIndex}`,__groupHeader:!0,groupKey:i.key,groupIndex:i.groupIndex},l++;for(let n=0;n<i.count;n++)a[l]=e[i.firstDataIndex+n],l++}return a},gt=(e,r)=>{let t=typeof r==="number"?(a)=>r:r;return(a)=>{let l=e.getEntry(a);if(l.type==="header")return e.getHeaderHeight(l.group.groupIndex);return t(l.dataIndex)}},Hr=(e,r)=>{let t=dt(e,r.getGroupForIndex),a=e+t.length,l=r.headerHeight;return{get totalEntries(){return a},get groupCount(){return t.length},get groups(){return t},getEntry:(i)=>{if(t.length===0)return{type:"item",dataIndex:i,group:{key:"",groupIndex:0,headerLayoutIndex:0,firstDataIndex:0,count:0}};let n=Ye(t,i),o=t[n];if(i===o.headerLayoutIndex)return{type:"header",group:o};let u=i-o.headerLayoutIndex-1;return{type:"item",dataIndex:o.firstDataIndex+u,group:o}},layoutToDataIndex:(i)=>{if(t.length===0)return i;let n=Ye(t,i),o=t[n];if(i===o.headerLayoutIndex)return-1;let u=i-o.headerLayoutIndex-1;return o.firstDataIndex+u},dataToLayoutIndex:(i)=>{if(t.length===0)return i;let n=st(t,i),o=t[n],u=i-o.firstDataIndex;return o.headerLayoutIndex+1+u},getGroupAtLayoutIndex:(i)=>{if(t.length===0)return{key:"",groupIndex:0,headerLayoutIndex:0,firstDataIndex:0,count:0};let n=Ye(t,i);return t[n]},getGroupAtDataIndex:(i)=>{if(t.length===0)return{key:"",groupIndex:0,headerLayoutIndex:0,firstDataIndex:0,count:0};let n=st(t,i);return t[n]},getHeaderHeight:typeof l==="number"?(i)=>l:(i)=>{let n=t[i];if(!n)return 0;return l(n.key,i)},rebuild:(i)=>{t=dt(i,r.getGroupForIndex),a=i+t.length}}},Lr=(e,r,t,a,l)=>{let i=document.createElement("div");i.className=`${l}-sticky-header`,i.setAttribute("role","presentation"),i.setAttribute("aria-hidden","true"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.zIndex="5",i.style.pointerEvents="none",i.style.willChange="transform",i.style.overflow="hidden",e.insertBefore(i,e.firstChild);let n=-1,o=!1,u=0,g=(v)=>{if(v===n)return;n=v;let p=r.groups;if(v<0||v>=p.length){i.textContent="";return}let b=p[v],E=a.headerTemplate(b.key,b.groupIndex),_=r.getHeaderHeight(v);if(i.style.height=`${_}px`,typeof E==="string")i.innerHTML=E;else i.replaceChildren(E)},d=(v)=>{let p=r.groups;if(p.length===0){S();return}let b=0;for(let W=p.length-1;W>=0;W--)if(t.getOffset(p[W].headerLayoutIndex)<=v){b=W;break}let E=t.getOffset(p[0].headerLayoutIndex);if(v<E){S();return}if(!o)c();g(b);let _=r.getHeaderHeight(b),F=0,G=b+1;if(G<p.length){let W=t.getOffset(p[G].headerLayoutIndex)-v;if(W<_)F=W-_}if(F!==u)u=F,i.style.transform=F===0?"":`translateY(${Math.round(F)}px)`},c=()=>{if(o)return;o=!0,i.style.display=""},S=()=>{if(!o)return;o=!1,i.style.display="none",n=-1,u=0,i.style.transform=""},h=()=>{let v=n;if(n=-1,v>=0)g(v)},I=()=>{i.remove(),n=-1,o=!1};return i.style.display="none",{update:d,refresh:h,show:c,hide:S,destroy:I}},Tr=(e)=>{return e!==null&&typeof e==="object"&&e.__groupHeader===!0},Er=(e)=>{let r=Math.max(1,Math.floor(e.columns)),t=e.gap??0,a={row:0,col:0},l=(c)=>{if(c<=0)return 0;return Math.ceil(c/r)},i=(c)=>{return a.row=Math.floor(c/r),a.col=c%r,a},n=(c)=>{return Math.floor(c/r)},o=(c)=>{return c%r},u=(c,S,h)=>{if(h<=0)return{start:0,end:-1};let I=Math.max(0,c*r),v=Math.min(h-1,(S+1)*r-1);return{start:I,end:v}},g=(c,S,h)=>{if(S<0||S>=r)return-1;let I=c*r+S;if(I<0||I>=h)return-1;return I},d=(c)=>{let S=(r-1)*t;return Math.max(0,(c-S)/r)};return{columns:r,gap:t,getTotalRows:l,getPosition:i,getRow:n,getCol:o,getItemRange:u,getItemIndex:g,getColumnWidth:d,getColumnOffset:(c,S)=>{let h=d(S);return c*(h+t)}}},Rr=(e=200)=>{let r=[];return{acquire:()=>{let t=r.pop();if(t)return t;let a=document.createElement("div");return a.setAttribute("role","option"),a},release:(t)=>{if(r.length<e)t.className="",t.textContent="",t.removeAttribute("style"),t.removeAttribute("data-index"),t.removeAttribute("data-id"),t.removeAttribute("data-row"),t.removeAttribute("data-col"),r.push(t)},clear:()=>{r.length=0}}},Ar=(e,r,t,a,l,i,n,o)=>{let u=Rr(),g=new Map,d=i,c=null,S=0,h="",I=(s)=>{if(c&&S===s)return c;return c=Te(s,t),S=s,c},v={selected:!1,focused:!1},p=(s,f)=>{return v.selected=s,v.focused=f,v},b=`${l}-item ${l}-grid-item`,E=`${l}-item--selected`,_=`${l}-item--focused`,F=(s,f)=>{if(typeof f==="string")s.innerHTML=f;else s.replaceChildren(f)},G=(s,f,C)=>{s.classList.toggle(E,f),s.classList.toggle(_,C)},W=(s,f)=>{let C=a.getRow(s);if(f){let k=f.totalItems,z=I(k);if(z.isCompressed)return ut(C,f.scrollTop,t,k,f.containerHeight,z,f.rangeStart)}return t.getOffset(C)},j=(s,f,C)=>{let k=a.getCol(f),z=a.getColumnOffset(k,d),M=W(f,C);s.style.transform=`translate(${Math.round(z)}px, ${Math.round(M)}px)`},V=(s,f)=>{let C=a.getColumnWidth(d),k=a.getRow(f),z=t.getHeight(k)-a.gap;s.style.width=`${C}px`,s.style.height=`${z}px`},ne=(s,f,C,k,z)=>{let M=u.acquire(),K=p(C,k);if(M.className=b,M.dataset.index=String(s),M.dataset.id=String(f.id),M.dataset.row=String(a.getRow(s)),M.dataset.col=String(a.getCol(s)),M.ariaSelected=String(C),o)M.id=`${o}-item-${s}`;if(n)h=String(n()),M.setAttribute("aria-setsize",h),M.setAttribute("aria-posinset",String(s+1));V(M,s);let U=r(f,s,K);return F(M,U),G(M,C,k),j(M,s,z),M},ae=(s,f,C,k,z)=>{for(let[m,D]of g)if(m<f.start||m>f.end)D.element.remove(),u.release(D.element),g.delete(m);let M=!1;if(n){let m=String(n());M=m!==h,h=m}let K=document.createDocumentFragment(),U=[];for(let m=f.start;m<=f.end;m++){let D=m-f.start,A=s[D];if(!A)continue;let $=C.has(A.id),Q=m===k,q=g.get(m);if(q){let Z=q.element.dataset.id,P=String(A.id);if(Z!==P){let w=p($,Q),L=r(A,m,w);F(q.element,L),q.element.dataset.id=P,q.element.dataset.row=String(a.getRow(m)),q.element.dataset.col=String(a.getCol(m)),V(q.element,m)}if(G(q.element,$,Q),q.element.ariaSelected=String($),j(q.element,m,z),M)q.element.setAttribute("aria-setsize",h)}else{let Z=ne(m,A,$,Q,z);K.appendChild(Z),U.push({index:m,element:Z})}}if(U.length>0){e.appendChild(K);for(let{index:m,element:D}of U)g.set(m,{index:m,element:D})}},te=(s)=>{for(let[f,C]of g)j(C.element,f,s)},O=(s,f,C,k)=>{let z=g.get(s);if(z){let M=p(C,k),K=r(f,s,M);F(z.element,K),G(z.element,C,k),z.element.dataset.id=String(f.id),z.element.ariaSelected=String(C),V(z.element,s)}},re=(s,f,C)=>{let k=g.get(s);if(k)G(k.element,f,C)},x=(s)=>{return g.get(s)?.element},H=(s)=>{if(Math.abs(s-d)<1)return;d=s;for(let[f,C]of g)V(C.element,f),j(C.element,f)},T=()=>{for(let[,s]of g)s.element.remove(),u.release(s.element);g.clear()};return{render:ae,updatePositions:te,updateItem:O,updateItemClasses:re,getElement:x,updateContainerWidth:H,clear:T,destroy:()=>{T(),u.clear()}}},kr=0,mt=(e)=>{if(!e.container)throw Error("[vlist] Container is required");if(!e.item)throw Error("[vlist] item configuration is required");let r=e.direction==="horizontal",t=r?"width":"height",a=r?e.item.width:e.item.height;if(a==null)throw Error(`[vlist] item.${t} is required${r?" when direction is 'horizontal'":""}`);if(typeof a==="number"&&a<=0)throw Error(`[vlist] item.${t} must be a positive number`);if(typeof a!=="number"&&typeof a!=="function")throw Error(`[vlist] item.${t} must be a number or a function (index) => number`);if(!e.item.template)throw Error("[vlist] item.template is required");if(r){if(e.groups)throw Error("[vlist] horizontal direction cannot be combined with groups");if(e.layout==="grid")throw Error("[vlist] horizontal direction cannot be combined with grid layout");if(e.reverse)throw Error("[vlist] horizontal direction cannot be combined with reverse mode")}if(e.layout==="grid"){if(!e.grid)throw Error("[vlist] grid configuration is required when layout is 'grid'");if(!e.grid.columns||e.grid.columns<1)throw Error("[vlist] grid.columns must be a positive integer >= 1");if(e.groups)throw Error("[vlist] grid layout cannot be combined with groups")}if(e.reverse){if(e.groups)throw Error("[vlist] reverse mode cannot be combined with groups");if(e.layout==="grid")throw Error("[vlist] reverse mode cannot be combined with grid layout")}let{item:l,items:i,adapter:n,overscan:o=Zt,selection:u,scroll:g,scrollbar:d,loading:c,idleTimeout:S,classPrefix:h=Kt,scrollElement:I,ariaLabel:v,groups:p,layout:b="list",grid:E,reverse:_=!1}=e,F=g?.wheel??!0,G=g?.wrap??!1,W=g?.element??I,j=g?.idleTimeout??S,V,ne={};if(g?.scrollbar!==void 0)if(g.scrollbar==="native")V="native";else if(g.scrollbar==="none")V="none";else V="custom",ne=g.scrollbar;else if(d!==void 0)if(d.enabled===!1)V="none";else V="custom",ne=d;else V="custom";let ae=!!W,te=!!p,O=b==="grid"&&!!E,re=_,x=a,H=r?typeof l.height==="number"?l.height:void 0:typeof l.width==="number"?l.width:void 0,{template:T}=l,s=u?.mode??"none",f=c?.cancelThreshold??qt,C=c?.preloadThreshold??Nt,k=c?.preloadAhead??jt,z=`${h}-${kr++}`,M=null,K=null;if(O&&E)M=Er(E);let U=()=>{let y=J?.getTotal()??0;if(O&&M)return M.getTotalRows(y);return y},m=null,D=null,A=i?[...i]:[],$=i??[],Q=x,q=T;if(te&&p){m=Hr(A.length,p),$=ct(A,m.groups),Q=gt(m,x);let y=p.headerTemplate;q=(R,X,de)=>{if(Tr(R))return y(R.groupKey,R.groupIndex);return T(R,X,de)}}let Z=_t(e.container),P=Ft(Z,h,v,r),w=Qt(),L=te?$?.length??0:i?.length??0,Y=O&&M?M.getTotalRows(L):L,ee=O&&M?M.gap:0;if(O&&ee>0)if(typeof Q==="number")Q=Q+ee;else{let y=Q;Q=(R)=>y(R)+ee}let N=kt(Q,Y),oe=null,ce=()=>{if(!m||!p)return;if(m.rebuild(A.length),$=ct(A,m.groups),Q=gt(m,x),D)D.refresh()},ge=te?$:i,J=mr({...n?{adapter:n}:{},...ge&&ge.length>0?{initialItems:ge}:{},...ge&&ge.length>0?{initialTotal:ge.length}:{},pageSize:ke,onStateChange:()=>{if(oe?.state.isInitialized)N.rebuild(U()),Ct()},onItemsLoaded:(y,R,X)=>{if(oe?.state.isInitialized)N.rebuild(U()),je(),w.emit("load:end",{items:y,total:X})}});if(ae)P.root.style.overflow="visible",P.root.style.height="auto",P.viewport.style.overflow="visible",P.viewport.style.height="auto";let me=ae?{height:window.innerHeight,width:P.viewport.clientWidth}:Wt(P.viewport),ve=r?me.width:me.height,le=(y)=>{if(r)Ot(P.content,y);else Bt(P.content,y)},fe=U(),ie=Te(fe,N),Ce=$t(ve,N,fe,o,ie,Le),he=null,se=dr(P.viewport,{compressed:ie.isCompressed,...ie.isCompressed?{compression:ie}:{},...j!==void 0?{idleTimeout:j}:{},...ae?{scrollElement:W}:{},wheel:F,horizontal:r,onScroll:(y)=>{if(!P.root.classList.contains(`${h}--scrolling`))P.root.classList.add(`${h}--scrolling`);if(he)he(y.scrollTop,y.direction)},onIdle:()=>{if(P.root.classList.remove(`${h}--scrolling`),he?.loadPendingRange)he.loadPendingRange()}});if(te)P.root.classList.add(`${h}--grouped`);let ye;if(O&&M)P.root.classList.add(`${h}--grid`),K=Ar(P.items,q,N,M,h,me.width,()=>J.getTotal(),z),ye=K;else ye=Pt(P.items,q,N,h,()=>J.getTotal(),z,r,r?H:void 0,{getState:Te,getPosition:ut});let ue=!ae&&V!=="none"&&(V==="custom"||V==="native"&&ie.isCompressed)?lt(P.viewport,(y)=>se.scrollTo(y),ne,h,r):null;if(!ae&&(V!=="native"||ie.isCompressed||!F))P.viewport.classList.add(`${h}-viewport--custom-scrollbar`);if(ue)ue.updateBounds(ie.virtualHeight,ve);if(te&&p&&m&&p.sticky!==!1)D=Lr(P.root,m,N,p,h);let B=oe=pr({itemHeight:Q,overscan:o,classPrefix:h,selectionMode:s,hasAdapter:!!n,reverse:re,wrap:G,cancelLoadThreshold:f,preloadThreshold:C,preloadAhead:k,ariaIdPrefix:z},P,N,J,se,ye,w,ue,{viewportState:Ce,selectionState:Jt(u?.initial),lastRenderRange:{start:0,end:0},isInitialized:!1,isDestroyed:!1,cachedCompression:{state:ie,totalItems:J.getTotal()}},O?U:void 0,Le,Ut),Mt=()=>{let y=U(),R=Te(y,N);if(R.isCompressed&&!se.isCompressed()){if(se.enableCompression(R),!ae&&!ue&&V!=="none"){if(ue=lt(P.viewport,(X)=>se.scrollTo(X),ne,h,r),!P.viewport.classList.contains(`${h}-viewport--custom-scrollbar`))P.viewport.classList.add(`${h}-viewport--custom-scrollbar`);B.scrollbar=ue}}else if(!R.isCompressed&&se.isCompressed())se.disableCompression();else if(R.isCompressed)se.updateConfig({compression:R});if(ae&&!R.isCompressed)se.updateConfig({compression:R});if(ue)ue.updateBounds(R.virtualHeight,B.state.viewportState.containerHeight)},Ct=()=>{if(B.state.isDestroyed)return;Mt(),B.state.viewportState=Xt(B.state.viewportState,N,U(),o,B.getCachedCompression(),Le),le(B.state.viewportState.totalHeight),be()},Ne=(y)=>{if(O&&M){let R=J.getTotal(),X=M.getItemRange(y.start,y.end,R);return{items:J.getItemsInRange(X.start,X.end),itemRange:X}}return{items:B.getItemsForRange(y),itemRange:y}},be=()=>{if(B.state.isDestroyed)return;let{renderRange:y,isCompressed:R}=B.state.viewportState,X=B.state.lastRenderRange;if(y.start===X.start&&y.end===X.end){if(R)ye.updatePositions(B.getCompressionContext());return}let{items:de,itemRange:Me}=Ne(y),we=R?B.getCompressionContext():void 0,Et=O?Me:y;ye.render(de,Et,B.state.selectionState.selected,B.state.selectionState.focusedIndex,we),B.state.lastRenderRange={...y},w.emit("range:change",{range:y})},je=()=>{if(B.state.isDestroyed)return;let{renderRange:y,isCompressed:R}=B.state.viewportState,{items:X,itemRange:de}=Ne(y),Me=R?B.getCompressionContext():void 0,we=O?de:y;ye.render(X,we,B.state.selectionState.selected,B.state.selectionState.focusedIndex,Me)},_e=vr(B,be);if(he=_e,D){let y=_e,R=D,X=(de,Me)=>{y(de,Me),R.update(de)};X.loadPendingRange=_e.loadPendingRange,he=X}let Ue=xr(B,je),Se=Mr(B),Qe=wr(B,Se.scrollToIndex),pe=yr(B),bt=te?{setItems:(y)=>{A=[...y],ce(),pe.setItems($)},appendItems:(y)=>{A=[...A,...y],ce(),pe.setItems($)},prependItems:(y)=>{A=[...y,...A],ce(),pe.setItems($)},updateItem:pe.updateItem,removeItem:(y)=>{A=A.filter((R)=>R.id!==y),ce(),pe.setItems($)},reload:pe.reload}:re?{...pe,appendItems:(y)=>{let R=se.isAtBottom(2);if(pe.appendItems(y),R){let X=J.getTotal();if(X>0)Se.scrollToIndex(X-1,"end")}},prependItems:(y)=>{let R=se.getScrollTop(),X=N.getTotalHeight();pe.prependItems(y);let de=N.getTotalHeight()-X;if(de>0)se.scrollTo(R+de)}}:pe,Ie=br(B),He=Cr(B),Je=te&&m?{getScrollSnapshot:()=>{let y=He.getScrollSnapshot(),R=m.layoutToDataIndex(y.index);return{...y,index:R>=0?R:y.index}},restoreScroll:(y)=>{let R=m.dataToLayoutIndex(y.index);He.restoreScroll({...y,index:R})}}:O&&M?{getScrollSnapshot:()=>{let y=He.getScrollSnapshot(),R=M.columns;return{...y,index:y.index*R}},restoreScroll:(y)=>{let R=M.columns,X=Math.floor(y.index/R);He.restoreScroll({...y,index:X})}}:He,Ht=(y,R)=>{return w.on(y,R)},Lt=(y,R)=>{w.off(y,R)},et=new ResizeObserver((y)=>{if(B.state.isDestroyed)return;if(ae)return;for(let R of y){let X=R.contentRect.height,de=R.contentRect.width,Me=B.state.viewportState.containerHeight,we=r?de:X;if(Math.abs(we-Me)>1){if(B.state.viewportState=rt(B.state.viewportState,we,N,U(),o,B.getCachedCompression(),Le),le(B.state.viewportState.totalHeight),ue)ue.updateBounds(B.state.viewportState.totalHeight,we);se.updateContainerHeight(we),be(),w.emit("resize",{height:X,width:de})}if(O&&K)K.updateContainerWidth(de)}}),Ee=null;if(ae)Ee=()=>{if(B.state.isDestroyed)return;let y=window.innerHeight,R=B.state.viewportState.containerHeight;if(Math.abs(y-R)>1)se.updateContainerHeight(y),B.state.viewportState=rt(B.state.viewportState,y,N,U(),o,B.getCachedCompression(),Le),le(B.state.viewportState.totalHeight),be(),w.emit("resize",{height:y,width:window.innerWidth})},window.addEventListener("resize",Ee);let xe=document.createElement("div");if(xe.setAttribute("aria-live","polite"),xe.setAttribute("aria-atomic","true"),xe.className=`${h}-live-region`,xe.style.cssText="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0",P.root.appendChild(xe),s!=="none")w.on("selection:change",({selected:y})=>{let R=y.length;if(R===0)xe.textContent="";else if(R===1)xe.textContent="1 item selected";else xe.textContent=`${R} items selected`});if(n)w.on("load:start",()=>{P.root.setAttribute("aria-busy","true")}),w.on("load:end",()=>{P.root.removeAttribute("aria-busy")});let Tt=()=>{if(B.state.isDestroyed)return;if(B.state.isDestroyed=!0,P.items.removeEventListener("click",Ue),P.root.removeEventListener("keydown",Qe),xe.remove(),et.disconnect(),Ee)window.removeEventListener("resize",Ee);if(se.destroy(),ue)ue.destroy();if(D)D.destroy();if(K)K.destroy();else ye.destroy();w.clear(),P.root.remove()};if(P.items.addEventListener("click",Ue),P.root.addEventListener("keydown",Qe),et.observe(P.viewport),B.state.isInitialized=!0,le(B.state.viewportState.totalHeight),be(),D)D.update(B.scrollController.getScrollTop());if(n&&(!i||i.length===0))w.emit("load:start",{offset:0,limit:ke}),J.loadInitial().catch((y)=>{w.emit("error",{error:y,context:"loadInitial"})});if(re){let y=J.getTotal();if(y>0)Se.scrollToIndex(y-1,"end");else if(n){let R=w.on("load:end",()=>{R();let X=J.getTotal();if(X>0)Se.scrollToIndex(X-1,"end")})}}return{get element(){return P.root},get items(){if(te)return A;return B.getAllLoadedItems()},get total(){if(te)return A.length;return J.getTotal()},...bt,...te&&m?{...Se,scrollToIndex:(y,R)=>{let X=m.dataToLayoutIndex(y);Se.scrollToIndex(X,R)}}:Se,getScrollSnapshot:Je.getScrollSnapshot,restoreScroll:Je.restoreScroll,select:Ie.select,deselect:Ie.deselect,toggleSelect:Ie.toggleSelect,selectAll:Ie.selectAll,clearSelection:Ie.clearSelection,getSelected:Ie.getSelected,getSelectedItems:Ie.getSelectedItems,on:Ht,off:Lt,destroy:Tt}};var Ze=new Map,pt=(e)=>{if(Ze.has(e.id))throw Error(`Suite "${e.id}" is already registered`);console.log(`[runner] Registering suite: ${e.id}`),Ze.set(e.id,e),console.log(`[runner] Suite registered. Total suites: ${Ze.size}`)};var Be=()=>new Promise((e)=>requestAnimationFrame(e)),Ke=async(e)=>{for(let r=0;r<e;r++)await Be()},zr=(e)=>new Promise((r)=>setTimeout(r,e)),qe=async()=>{if(typeof globalThis.gc==="function")globalThis.gc();await zr(100),await Ke(3)};var vt=(e)=>{if(e.length===0)return 0;let r=[...e].sort((a,l)=>a-l),t=Math.floor(r.length/2);return r.length%2!==0?r[t]:(r[t-1]+r[t])/2},xt=(e,r)=>{if(e.length===0)return 0;let t=r/100*(e.length-1),a=Math.floor(t),l=Math.ceil(t);if(a===l)return e[a];return e[a]+(e[l]-e[a])*(t-a)},Oe=(e,r=1)=>{let t=10**r;return Math.round(e*t)/t},wt=(e)=>{let r=Array(e);for(let t=0;t<e;t++)r[t]={id:t};return r},yt=(e,r)=>`<div class="bench-item">${r}</div>`,We=(e,r,t)=>{if(e<=r)return"good";if(e<=t)return"ok";return"bad"};var Dr=48,Pr=2,St=7,It=async(e,r)=>{e.innerHTML="",await Be();let t=performance.now(),a=mt({container:e,item:{height:Dr,template:yt},items:r});await Be();let l=performance.now()-t;return a.destroy(),e.innerHTML="",l};console.log("[render/javascript] Defining suite with ID: render-javascript");pt({id:"render-javascript",name:"Initial Render (JavaScript)",description:"Time from createVList() to first painted frame",icon:"âš¡",run:async({itemCount:e,container:r,onStatus:t})=>{let a=wt(e);t("Warming up...");for(let c=0;c<Pr;c++)await It(r,a),await qe();t("Measuring...");let l=[];for(let c=0;c<St;c++){t(`Iteration ${c+1}/${St}`),await qe();let S=await It(r,a);l.push(S),await Ke(5)}let i=[...l].sort((c,S)=>c-S),n=Oe(vt(l),2),o=Oe(i[0],2),u=Oe(xt(i,95),2),g=e<=1e4?20:e<=1e5?30:80,d=e<=1e4?40:e<=1e5?60:200;return[{label:"Median",value:n,unit:"ms",better:"lower",rating:We(n,g,d)},{label:"Min",value:o,unit:"ms",better:"lower",rating:We(o,g,d)},{label:"p95",value:u,unit:"ms",better:"lower",rating:We(u,g*1.5,d*1.5)}]}});
